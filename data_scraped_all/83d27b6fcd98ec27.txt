Note
Access to this page requires authorization. You can trysigning inorchanging directories.
Access to this page requires authorization. You can trychanging directories.
Architecture best practices for Virtual Machines and scale sets
Article
2025-03-27
10 contributors
In this article
Azure Virtual Machines is a type of compute service that you can use to create and run virtual machines (VMs) on the Azure platform. It offers flexibility in different SKUs, operating systems, and configurations with various billing models.
This article assumes that as an architect you've reviewed thecompute decision treeand chose Virtual Machines as the compute service for your workload.
The guidance in this article provides architectural recommendations that are mapped to the principles of theAzure Well-Architected Framework pillars.
Important
How to use this guide
Each section has adesign checklistthat presents architectural areas of concern along with design strategies localized to the technology scope.
Also included arerecommendationson the technology capabilities that can help materialize those strategies. The recommendations don't represent an exhaustive list of all configurations available for Virtual Machines and its dependencies. Instead, they list the key recommendations mapped to the design perspectives. Use the recommendations to build your proof-of-concept or optimize your existing environments.
Foundational architecture that demonstrates the key recommendations:Virtual Machines baseline architecture.
Technology scope
This review focuses on the interrelated decisions for the following Azure resources:
Virtual Machines
Virtual Machines
Azure Virtual Machine Scale SetsWhile not detailed in this document, Disks are a critical dependency for VM-based architectures. For more information, seeDisks and optimization.
Azure Virtual Machine Scale Sets
While not detailed in this document, Disks are a critical dependency for VM-based architectures. For more information, seeDisks and optimization.
Reliability
The purpose of the Reliability pillar is to provide continued functionality bybuilding enough resilience and the ability to recover fast from failures.
TheReliability design principlesprovide a high-level design strategy applied for individual components, system flows, and the system as a whole.
Design checklist
Start your design strategy based on thedesign review checklist for Reliability. Determine its relevance to your business requirements while keeping in mind the SKUs and features of VMs and their dependencies. Extend the strategy to include more approaches as needed.
Review Virtual Machines quotas and limitsthat might pose design restrictions. VMs have specific limits and quotas, which vary based on the type of VM or the region. There might be subscription restrictions, such as the number of VMs per subscription or the number of cores per VM. If other workloads share your subscription, then your ability to consume data might be reduced.
Check limits onVMs,virtual machine scale sets, andmanaged disks.
Review Virtual Machines quotas and limitsthat might pose design restrictions. VMs have specific limits and quotas, which vary based on the type of VM or the region. There might be subscription restrictions, such as the number of VMs per subscription or the number of cores per VM. If other workloads share your subscription, then your ability to consume data might be reduced.
Check limits onVMs,virtual machine scale sets, andmanaged disks.
Conduct a failure mode analysisto minimize points of failure by analyzing VM interactions with the network and storage components. Choose configurations like ephemeral operating system (OS) disks to localize disk access and avoid network hops. Add a load balancer to enhance self-preservation by distributing network traffic across multiple VMs, which improves availability and reliability.
Conduct a failure mode analysisto minimize points of failure by analyzing VM interactions with the network and storage components. Choose configurations like ephemeral operating system (OS) disks to localize disk access and avoid network hops. Add a load balancer to enhance self-preservation by distributing network traffic across multiple VMs, which improves availability and reliability.
Calculate your composite service-level objectives (SLOs) based on Azure service-level agreements (SLAs). Ensure that your SLO isn't higher than theAzure SLAsto avoid unrealistic expectations and potential issues.Be aware of the complexities that dependencies introduce. For example, some dependencies, like virtual networks and network interface cards (NICs), don't have their own SLAs. Other dependencies, such as an associated data disk, have SLAs that integrate with VM SLAs. You should consider these variations because they can affect VM performance and reliability.Factor in the critical dependencies of VMs on components like disks and networking components. If you understand these relationships, then you can determine the critical flows that affect reliability.
Calculate your composite service-level objectives (SLOs) based on Azure service-level agreements (SLAs). Ensure that your SLO isn't higher than theAzure SLAsto avoid unrealistic expectations and potential issues.
Be aware of the complexities that dependencies introduce. For example, some dependencies, like virtual networks and network interface cards (NICs), don't have their own SLAs. Other dependencies, such as an associated data disk, have SLAs that integrate with VM SLAs. You should consider these variations because they can affect VM performance and reliability.
Factor in the critical dependencies of VMs on components like disks and networking components. If you understand these relationships, then you can determine the critical flows that affect reliability.
Create state isolation. Workload data should be on a separate data disk to prevent interference with the OS disk. If a VM fails, you can create a new OS disk with the same data disk, which ensures resilience and fault isolation. For more information, seeEphemeral OS disks.
Create state isolation. Workload data should be on a separate data disk to prevent interference with the OS disk. If a VM fails, you can create a new OS disk with the same data disk, which ensures resilience and fault isolation. For more information, seeEphemeral OS disks.
Make VMs and their dependencies redundant across zones. If a VM fails, the workload should continue to function because of redundancy. Include dependencies in your redundancy choices. For example, use the built-in redundancy options that are available with disks. Use zone-redundant IPs to ensure data availability and high uptime.
Make VMs and their dependencies redundant across zones. If a VM fails, the workload should continue to function because of redundancy. Include dependencies in your redundancy choices. For example, use the built-in redundancy options that are available with disks. Use zone-redundant IPs to ensure data availability and high uptime.
Be ready to scale up and scale outto prevent service level degradation and to avoid failures.Virtual Machine Scale Setshave autoscale capabilities that create new instances as required and distribute the load across multiple VMs and availability zones.
Be ready to scale up and scale outto prevent service level degradation and to avoid failures.Virtual Machine Scale Setshave autoscale capabilities that create new instances as required and distribute the load across multiple VMs and availability zones.
Explore the automatic recovery options. Azure supports health degradation monitoring and self-healing features for VMs. For example, scale sets provideautomatic instance repairs. In more advanced scenarios, self-healing involves using Azure Site Recovery, having a passive standby to fail over to, or redeploying from infrastructure as code (IaC). The method that you choose should align with the business requirements and your organizational operations. For more information, seeVM service disruptions.
Explore the automatic recovery options. Azure supports health degradation monitoring and self-healing features for VMs. For example, scale sets provideautomatic instance repairs. In more advanced scenarios, self-healing involves using Azure Site Recovery, having a passive standby to fail over to, or redeploying from infrastructure as code (IaC). The method that you choose should align with the business requirements and your organizational operations. For more information, seeVM service disruptions.
Rightsize the VMs and their dependencies. Understand your VM's expected work to ensure it's not undersized and can handle the maximum load. Have extra capacity to mitigate failures.
Rightsize the VMs and their dependencies. Understand your VM's expected work to ensure it's not undersized and can handle the maximum load. Have extra capacity to mitigate failures.
Create a comprehensive disaster recovery plan. Disaster preparedness involves creating a comprehensive plan and deciding on a technology for recovery.Dependencies and stateful components, such as attached storage, can complicate recovery. If disks go down, then that failure affects the VM's functioning. Include a clear process for these dependencies in your recovery plans.
Create a comprehensive disaster recovery plan. Disaster preparedness involves creating a comprehensive plan and deciding on a technology for recovery.
Dependencies and stateful components, such as attached storage, can complicate recovery. If disks go down, then that failure affects the VM's functioning. Include a clear process for these dependencies in your recovery plans.
Run operations with rigor. Reliability design choices must be supported by effective operations based on the principles of monitoring, resiliency testing in production, automated application VM patches and upgrades, and consistency of deployments. For operational guidance, seeOperational Excellence.
Run operations with rigor. Reliability design choices must be supported by effective operations based on the principles of monitoring, resiliency testing in production, automated application VM patches and upgrades, and consistency of deployments. For operational guidance, seeOperational Excellence.
Recommendations
Security
The purpose of the Security pillar is to provideconfidentiality, integrity, and availabilityguarantees to the workload.
TheSecurity design principlesprovide a high-level design strategy for achieving those goals by applying approaches to the technical design of Virtual Machines.
Design checklist
Start your design strategy based on thedesign review checklist for Security. Identify vulnerabilities and controls to improve the security posture. Extend the strategy to include more approaches as needed.
Review the security baselinesforLinuxandWindowsVMs andVirtual Machine Scale Sets.As part of your baseline technology choices, consider the security features of the VM SKUs that support your workload.
Review the security baselinesforLinuxandWindowsVMs andVirtual Machine Scale Sets.
As part of your baseline technology choices, consider the security features of the VM SKUs that support your workload.
Ensure timely and automated security patching and upgrades. Make sure updates are automatically rolled out and validated by using a well-defined process. Use a solution likeAzure Automationto manage OS updates and maintain security compliance by making critical updates.
Ensure timely and automated security patching and upgrades. Make sure updates are automatically rolled out and validated by using a well-defined process. Use a solution likeAzure Automationto manage OS updates and maintain security compliance by making critical updates.
Identify the VMs that hold state. Make sure that data is classified according to the sensitivity labels that your organization provided. Protect data by using security controls like appropriate levels of at-rest and in-transit encryption. If you have high sensitivity requirements, consider using high-security controls like double encryption and Azure confidential computing to protect data-in-use.
Identify the VMs that hold state. Make sure that data is classified according to the sensitivity labels that your organization provided. Protect data by using security controls like appropriate levels of at-rest and in-transit encryption. If you have high sensitivity requirements, consider using high-security controls like double encryption and Azure confidential computing to protect data-in-use.
Provide segmentationto the VMs and scale sets by setting network boundaries and access controls. Place VMs in resource groups that share the same lifecycle.
Provide segmentationto the VMs and scale sets by setting network boundaries and access controls. Place VMs in resource groups that share the same lifecycle.
Apply access controls to the identitiesthat try to reach the VMs and also to the VMs that reach other resources. Use Microsoft Entra ID for authentication and authorization needs. Put strong passwords, multifactor authentication, and role-based access control (RBAC) in place for your VMs and their dependencies, like secrets, to permit allowed identities to perform only the operations that are expected of their roles.Restrict resource access based on conditions by using Microsoft Entra Conditional Access. Define the conditional policies based on duration and the minimum set of required permissions.
Apply access controls to the identitiesthat try to reach the VMs and also to the VMs that reach other resources. Use Microsoft Entra ID for authentication and authorization needs. Put strong passwords, multifactor authentication, and role-based access control (RBAC) in place for your VMs and their dependencies, like secrets, to permit allowed identities to perform only the operations that are expected of their roles.
Restrict resource access based on conditions by using Microsoft Entra Conditional Access. Define the conditional policies based on duration and the minimum set of required permissions.
Use network controls to restrict ingress and egress traffic. Isolate VMs and scale sets in Azure Virtual Network and define network security groups to filter traffic. Protect against distributed denial of service (DDoS) attacks. Use load balancers and firewall rules to protect against malicious traffic and data exfiltration attacks.UseAzure Bastionto provide secure connectivity to the VMs for operational access.Communication to and from the VMs to platform as a service (PaaS) solutions should be over private endpoints.
Use network controls to restrict ingress and egress traffic. Isolate VMs and scale sets in Azure Virtual Network and define network security groups to filter traffic. Protect against distributed denial of service (DDoS) attacks. Use load balancers and firewall rules to protect against malicious traffic and data exfiltration attacks.
UseAzure Bastionto provide secure connectivity to the VMs for operational access.
Communication to and from the VMs to platform as a service (PaaS) solutions should be over private endpoints.
Reduce the attack surfaceby hardening OS images and removing unused components. Use smaller images and remove binaries that aren't required to run the workload. Tighten the VM configurations by removing features, like default accounts and ports, that you don't need.
Reduce the attack surfaceby hardening OS images and removing unused components. Use smaller images and remove binaries that aren't required to run the workload. Tighten the VM configurations by removing features, like default accounts and ports, that you don't need.
Protect secretssuch as the certificates that you need to protect data in transit. Consider using the Azure Key Vault extension forWindowsorLinuxthat automatically refreshes the certificates stored in a key vault. When it detects a change in the certificates, the extension retrieves and installs the corresponding certificates.
Protect secretssuch as the certificates that you need to protect data in transit. Consider using the Azure Key Vault extension forWindowsorLinuxthat automatically refreshes the certificates stored in a key vault. When it detects a change in the certificates, the extension retrieves and installs the corresponding certificates.
Threat detection. Monitor VMs for threats and misconfigurations. UseDefender for Serversto capture VM and OS changes, and maintain an audit trail of access, new accounts, and changes in permissions.
Threat detection. Monitor VMs for threats and misconfigurations. UseDefender for Serversto capture VM and OS changes, and maintain an audit trail of access, new accounts, and changes in permissions.
Threat prevention. Protect against malware attacks and malicious actors by implementing security controls like firewalls, antivirus software, and intrusion detection systems. Determine if aTrusted Execution Environment (TEE)is required.
Threat prevention. Protect against malware attacks and malicious actors by implementing security controls like firewalls, antivirus software, and intrusion detection systems. Determine if aTrusted Execution Environment (TEE)is required.
Recommendations
Cost Optimization
Cost Optimization focuses ondetecting spend patterns, prioritizing investments in critical areas, and optimizing in othersto meet the organization's budget while meeting business requirements.
TheCost Optimization design principlesprovide a high-level design strategy for achieving those goals and making tradeoffs as necessary in the technical design related to Virtual Machines and its environment.
Design checklist
Start your design strategy based on thedesign review checklist for Cost Optimizationfor investments. Fine-tune the design so that the workload is aligned with the budget that's allocated for the workload. Your design should use the right Azure capabilities, monitor investments, and find opportunities to optimize over time.
Estimate realistic costs. Use thepricing calculatorto estimate the costs of your VMs. Identify the best VM for your workload by using the VM selector. For more information, seeLinuxandWindowspricing.
Estimate realistic costs. Use thepricing calculatorto estimate the costs of your VMs. Identify the best VM for your workload by using the VM selector. For more information, seeLinuxandWindowspricing.
Implement cost guardrails. Use governance policies to restrict resource types, configurations, and locations. Use RBAC to block actions that can lead to overspending.
Implement cost guardrails. Use governance policies to restrict resource types, configurations, and locations. Use RBAC to block actions that can lead to overspending.
Choose the right resources. Your selection of VM plan sizes and SKUs directly affect the overall cost. Choose VMs based on workload characteristics. Is the workload CPU intensive or does it run interruptible processes? Each SKU has associated disk options that affect the overall cost.
Choose the right resources. Your selection of VM plan sizes and SKUs directly affect the overall cost. Choose VMs based on workload characteristics. Is the workload CPU intensive or does it run interruptible processes? Each SKU has associated disk options that affect the overall cost.
Choose the right capabilities for dependent resources. Save on backup storage costs for the vault-standard tier by using Azure Backup storage with reserved capacity. It offers a discount when you commit to a reservation for either one year or three years.The archive tier in Azure Storage is an offline tier that's optimized for storing blob data that's rarely accessed. The archive tier offers the lowest storage costs but higher data retrieval costs and latency compared to the hot and cool online tiers.Consider usingzone to zone disaster recoveryfor VMs to recover from site failure while reducing the complexity of availability by using zone-redundant services. There can be cost benefits from reduced operational complexity.
Choose the right capabilities for dependent resources. Save on backup storage costs for the vault-standard tier by using Azure Backup storage with reserved capacity. It offers a discount when you commit to a reservation for either one year or three years.
The archive tier in Azure Storage is an offline tier that's optimized for storing blob data that's rarely accessed. The archive tier offers the lowest storage costs but higher data retrieval costs and latency compared to the hot and cool online tiers.
Consider usingzone to zone disaster recoveryfor VMs to recover from site failure while reducing the complexity of availability by using zone-redundant services. There can be cost benefits from reduced operational complexity.
Choose the right billing model. Evaluate whether commitment-based models for computing optimize costs based on the business requirements of workload. Consider these Azure options:Azure reservations: Prepay for predictable workloads to reduce costs compared to consumption-based pricing.ImportantPurchase reserved instances to reduce Azure costs for workloads that have stable usage. Manage usage to make sure that you're not paying for more resources than you're using. Keep reserved instances simple and keep management overhead low to reduce costs.Savings plan: If you commit to spend a fixed hourly amount on compute services for one or three years, then this plan can reduce costs.Azure Hybrid Benefit: Save when you migrate your on-premises VMs to Azure.
Choose the right billing model. Evaluate whether commitment-based models for computing optimize costs based on the business requirements of workload. Consider these Azure options:
Azure reservations: Prepay for predictable workloads to reduce costs compared to consumption-based pricing.ImportantPurchase reserved instances to reduce Azure costs for workloads that have stable usage. Manage usage to make sure that you're not paying for more resources than you're using. Keep reserved instances simple and keep management overhead low to reduce costs.
Important
Purchase reserved instances to reduce Azure costs for workloads that have stable usage. Manage usage to make sure that you're not paying for more resources than you're using. Keep reserved instances simple and keep management overhead low to reduce costs.
Savings plan: If you commit to spend a fixed hourly amount on compute services for one or three years, then this plan can reduce costs.
Azure Hybrid Benefit: Save when you migrate your on-premises VMs to Azure.
Monitor usage. Continuously monitor usage patterns and detect unused or underutilized VMs. For those instances, shut down VM instances when they're not in use. Monitoring is a key approach of Operational Excellence. For more information, see the recommendations inOperational Excellence.
Monitor usage. Continuously monitor usage patterns and detect unused or underutilized VMs. For those instances, shut down VM instances when they're not in use. Monitoring is a key approach of Operational Excellence. For more information, see the recommendations inOperational Excellence.
Look for ways to optimize. Some strategies include choosing the most cost-effective approach between increasing resources in an existing system, or scaling up, and adding more instances of that system, or scaling out. You can offload demand by distributing it to other resources, or you can reduce demand by implementing priority queues, gateway offloading, buffering, and rate limiting. For more information, see the recommendations inPerformance Efficiency.
Look for ways to optimize. Some strategies include choosing the most cost-effective approach between increasing resources in an existing system, or scaling up, and adding more instances of that system, or scaling out. You can offload demand by distributing it to other resources, or you can reduce demand by implementing priority queues, gateway offloading, buffering, and rate limiting. For more information, see the recommendations inPerformance Efficiency.
Recommendations
Operational Excellence
Operational Excellence primarily focuses on procedures fordevelopment practices, observability, and release management.
TheOperational Excellence design principlesprovide a high-level design strategy for achieving those goals for the operational requirements of the workload.
Design checklist
Start your design strategy based on thedesign review checklist for Operational Excellencefor defining processes for observability, testing, and deployment related to Virtual Machines and scale sets.
Monitor the VM instances. Collect logs and metrics from VM instances to monitor resource usage and measure the health of the instances. Some commonmetricsinclude CPU usage, number of requests, and input/output (I/O) latency. Set up Azure Monitoralertsto be notified about issues and to detect configuration changes in your environment.
Monitor the VM instances. Collect logs and metrics from VM instances to monitor resource usage and measure the health of the instances. Some commonmetricsinclude CPU usage, number of requests, and input/output (I/O) latency. Set up Azure Monitoralertsto be notified about issues and to detect configuration changes in your environment.
Monitor the health of the VMs and their dependencies.Deploy monitoring components to collect logs and metrics that give a comprehensive view of your VMs, guest OS, and boot diagnostics data. Virtual Machine Scale Sets roll up telemetry, which allows you to view health metrics at an individual VM level or as an aggregate. Use Azure Monitor to view this data per VM or aggregated across multiple VMs. For more information, seeRecommendations on monitoring agents.Take advantage of networking components that check the health status of VMs. For example, Azure Load Balancer pings VMs to detect unhealthy VMs and reroute traffic accordingly.Set up Azure Monitor alert rules. Determine important conditions in your monitoring data to identify and address issues before they affect the system.
Monitor the health of the VMs and their dependencies.
Deploy monitoring components to collect logs and metrics that give a comprehensive view of your VMs, guest OS, and boot diagnostics data. Virtual Machine Scale Sets roll up telemetry, which allows you to view health metrics at an individual VM level or as an aggregate. Use Azure Monitor to view this data per VM or aggregated across multiple VMs. For more information, seeRecommendations on monitoring agents.
Take advantage of networking components that check the health status of VMs. For example, Azure Load Balancer pings VMs to detect unhealthy VMs and reroute traffic accordingly.
Set up Azure Monitor alert rules. Determine important conditions in your monitoring data to identify and address issues before they affect the system.
Create a maintenance planthat includes regular system patching as a part of routine operations. Include emergency processes that allow for immediate patch application. You can have custom processes to manage patching or partially delegate the task to Azure.
Azure provides features for individualVM maintenance. You can set up maintenance windows to minimize disruptions during updates. During platform updates, fault domain considerations are key for resilience. We recommend that you deploy at least two instances in a zone. Two VMs per zone guarantees a minimum of one VM in each zone because only one fault domain in a zone is updated at a time. So, for three zones, provision at least six instances.
Create a maintenance planthat includes regular system patching as a part of routine operations. Include emergency processes that allow for immediate patch application. You can have custom processes to manage patching or partially delegate the task to Azure.
Azure provides features for individualVM maintenance. You can set up maintenance windows to minimize disruptions during updates. During platform updates, fault domain considerations are key for resilience. We recommend that you deploy at least two instances in a zone. Two VMs per zone guarantees a minimum of one VM in each zone because only one fault domain in a zone is updated at a time. So, for three zones, provision at least six instances.
Automate processes for bootstrapping, running scripts, and configuring VMs. You can automate processes by using extensions or custom scripts. We recommend the following options:TheKey Vault VM extensionautomatically refreshes certificates that are stored in a key vault.TheAzure Custom Script Extensionfor Windows and Linux downloads and runs scripts on Virtual Machines. Use this extension for post-deployment configuration, software installation, or any other configuration or management task.Use cloud-init to set up the startup environment for Linux-based VMs.
Automate processes for bootstrapping, running scripts, and configuring VMs. You can automate processes by using extensions or custom scripts. We recommend the following options:
TheKey Vault VM extensionautomatically refreshes certificates that are stored in a key vault.
TheKey Vault VM extensionautomatically refreshes certificates that are stored in a key vault.
TheAzure Custom Script Extensionfor Windows and Linux downloads and runs scripts on Virtual Machines. Use this extension for post-deployment configuration, software installation, or any other configuration or management task.
TheAzure Custom Script Extensionfor Windows and Linux downloads and runs scripts on Virtual Machines. Use this extension for post-deployment configuration, software installation, or any other configuration or management task.
Use cloud-init to set up the startup environment for Linux-based VMs.
Use cloud-init to set up the startup environment for Linux-based VMs.
Have processes for installing automatic updates. Consider usingAutomatic VM guest patchingfor a timely rollout of critical patches and security patches. UseAzure Update Managerto manage OS updates for your Windows and Linux virtual machines in Azure.
Have processes for installing automatic updates. Consider usingAutomatic VM guest patchingfor a timely rollout of critical patches and security patches. UseAzure Update Managerto manage OS updates for your Windows and Linux virtual machines in Azure.
Build a test environmentthat closely matches your production environment to test updates and changes before you deploy them to production. Have processes in place to test the security updates, performance baselines, and reliability faults. Take advantage of Azure Chaos Studio fault libraries to inject and simulate error conditions. For more information, seeAzure Chaos Studio fault and action library.
Build a test environmentthat closely matches your production environment to test updates and changes before you deploy them to production. Have processes in place to test the security updates, performance baselines, and reliability faults. Take advantage of Azure Chaos Studio fault libraries to inject and simulate error conditions. For more information, seeAzure Chaos Studio fault and action library.
Manage your quota. Plan what level of quota your workload requires and review that level regularly as the workload evolves. If you need to increase or decrease your quota,request those changes early.
Manage your quota. Plan what level of quota your workload requires and review that level regularly as the workload evolves. If you need to increase or decrease your quota,request those changes early.
Recommendations
Performance Efficiency
Performance Efficiency is aboutmaintaining user experience even when there's an increase in loadby managing capacity. The strategy includes scaling resources, identifying and optimizing potential bottlenecks, and optimizing for peak performance.
ThePerformance Efficiency design principlesprovide a high-level design strategy for achieving those capacity goals against the expected usage.
Design checklist
Start your design strategy based on thedesign review checklist for Performance Efficiency. Define a baseline that's based on key performance indicators for Virtual Machines and scale sets.
Define performance targets. Identify VM metrics to track and measure against performance indicators as response time, CPU utilization, and memory utilization, as well as workload metrics such as transactions per second, concurrent users, and availability and health.
Define performance targets. Identify VM metrics to track and measure against performance indicators as response time, CPU utilization, and memory utilization, as well as workload metrics such as transactions per second, concurrent users, and availability and health.
Factor in the performance profile of VMs, scale sets, and disk configuration in your capacity planning. Each SKU has a different profile of memory and CPU and behaves differently depending on the type of workload. Conduct pilots and proofs of concept to understand performance behavior under the specific workload.
Factor in the performance profile of VMs, scale sets, and disk configuration in your capacity planning. Each SKU has a different profile of memory and CPU and behaves differently depending on the type of workload. Conduct pilots and proofs of concept to understand performance behavior under the specific workload.
VM performance tuning. Take advantage of performance optimization and enhancing features as required by the workload. For example, use locally attached Non-Volatile Memory Express (NVMe) for high performance use cases and accelerated networking, and use Premium SSD v2 for better performance and scalability.
VM performance tuning. Take advantage of performance optimization and enhancing features as required by the workload. For example, use locally attached Non-Volatile Memory Express (NVMe) for high performance use cases and accelerated networking, and use Premium SSD v2 for better performance and scalability.
Take the dependent services into account. Workload dependencies, like caching, network traffic, and content delivery networks, that interact with the VMs can affect performance. Also, consider geographical distribution, like zones and regions, which can add latency.
Take the dependent services into account. Workload dependencies, like caching, network traffic, and content delivery networks, that interact with the VMs can affect performance. Also, consider geographical distribution, like zones and regions, which can add latency.
Collect performance data. Follow theOperational Excellence best practicesfor monitoring and deploy the appropriate extensions to view metrics that track against performance indicators.
Collect performance data. Follow theOperational Excellence best practicesfor monitoring and deploy the appropriate extensions to view metrics that track against performance indicators.
Proximity placement groups. Useproximity placement groupsin workloads where low latency is required to ensure that VMs are physically located close to each other.
Proximity placement groups. Useproximity placement groupsin workloads where low latency is required to ensure that VMs are physically located close to each other.
Recommendations
Azure Policies
Azure offers a wide range of built-in policies that help manage Virtual Machines and related dependencies. These policies can be used to audit various aspects of your environment to ensure compliance with best practices and organizational standards.
Design Checklist
Start by reviewing your environment based on the following Azure Policy guidelines for Virtual Machines and related components.
Enable Encryption at Host. Ensure that encryption is enabled at the host level for additional security of your VM data.
Enable Encryption at Host. Ensure that encryption is enabled at the host level for additional security of your VM data.
Deploy Anti-malware Extensions. Verify that anti-malware extensions are deployed on VMs running Windows Server and set for automatic updates to ensure ongoing protection.
Deploy Anti-malware Extensions. Verify that anti-malware extensions are deployed on VMs running Windows Server and set for automatic updates to ensure ongoing protection.
Enable Automatic OS Image Patching. Check that automatic OS image patching is enabled on scale sets to ensure that your VMs stay updated with security patches.
Enable Automatic OS Image Patching. Check that automatic OS image patching is enabled on scale sets to ensure that your VMs stay updated with security patches.
Install Only Approved VM Extensions. Audit that only approved extensions are installed on your VMs, minimizing the risk of security vulnerabilities.
Install Only Approved VM Extensions. Audit that only approved extensions are installed on your VMs, minimizing the risk of security vulnerabilities.
Enable Monitor and Dependency Agents. Ensure that the Monitor agent and dependency agents are enabled on all new VMs to facilitate monitoring and dependency management.
Enable Monitor and Dependency Agents. Ensure that the Monitor agent and dependency agents are enabled on all new VMs to facilitate monitoring and dependency management.
Restrict to Allowed VM SKUs. Confirm that only approved VM SKUs are deployed, adhering to your cost constraints and resource requirements.
Restrict to Allowed VM SKUs. Confirm that only approved VM SKUs are deployed, adhering to your cost constraints and resource requirements.
Use Private Endpoints for Disk Access. Ensure that private endpoints are used to securely access disk resources, preventing exposure to public networks.
Use Private Endpoints for Disk Access. Ensure that private endpoints are used to securely access disk resources, preventing exposure to public networks.
Enable Vulnerability Detection. Enable vulnerability detection for your VMs, and for Windows machines, configure rules such as daily scans with Windows Defender to detect potential threats.
Enable Vulnerability Detection. Enable vulnerability detection for your VMs, and for Windows machines, configure rules such as daily scans with Windows Defender to detect potential threats.
For comprehensive governance, review theAzure Policy built-in definitions for Virtual Machinesand other policies that might affect the security of the compute layer.
Azure Advisor
Azure Advisoris a personalized cloud consultant that helps you follow best practices to optimize your Azure deployments. Here are some recommendations that can help you improve the reliability, security, cost effectiveness, performance, and operational excellence of Virtual Machines.
Recommendations
Next steps
Consider the following articles as resources that demonstrate the recommendations highlighted in this article.
Use the following reference architectures as examples of how you can apply this article's guidance to a workload:Single VM architectures:Linux VMandWindows VMFoundational architecture that focuses on infrastructure recommendations:Virtual Machines baseline architecture
Single VM architectures:Linux VMandWindows VM
Foundational architecture that focuses on infrastructure recommendations:Virtual Machines baseline architecture
Build implementation expertise by using the following product documentation:Virtual MachinesVirtual Machine Scale Sets
Virtual Machines
Virtual Machine Scale Sets
Feedback
Was this page helpful?
Additional resources