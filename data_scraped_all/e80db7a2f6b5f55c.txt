Note
Access to this page requires authorization. You can trysigning inorchanging directories.
Access to this page requires authorization. You can trychanging directories.
Automate assessment at scale by using Azure Policy
Article
2024-11-25
4 contributors
In this article
This article describes how to enable Periodic Assessment for your machines at scale by using Azure Policy.Periodic Assessmentis a setting on your machine that enables you to see the latest updates available for your machines and removes the hassle of performing assessment manually every time you need to check the update status. After you enable this setting, Update Manager fetches updates on your machine once every 24 hours.
Enable Periodic Assessment for your Azure machines by using Azure Policy
Go toPolicyin the Azure portal and selectAuthoring>Definitions.
From theCategorydropdown, selectAzure Update Manager. SelectConfigure periodic checking for missing system updates on Azure virtual machinesfor Azure machines.
WhenPolicy definitionopens, selectAssign.
On theBasicstab, select your subscription as your scope. You can also specify a resource group within your subscription as the scope. SelectNext.
On theParameterstab, clearOnly show parameters that need input or reviewso that you can see the values of parameters. Note thatAssessmentmode =AutomaticByPlatformby default.
Set theOS Typeparameter to be eitherWindowsorLinux. You need to create separate policies for Windows and Linux. SelectNext.
On theRemediationtab, selectCreate a remediation taskso that periodic assessment is enabled on your machines. SelectNext.
On theNon-compliance messagetab, provide the message that you want to see if there was noncompliance. For example, useYour machine doesn't have periodic assessment enabled.SelectReview + Create.
On theReview + Createtab, selectCreateto triggerAssignment and Remediation Taskcreation, which can take a minute or so.
You can monitor the compliance of resources underComplianceand remediation status underRemediationon the Azure Policy home page.
Note
Periodic assessment policies work for all supported image types. If you are facing failures during remediation see,remediation failures for gallery imagesfor more information.
Run a remediation task post createfor issues with auto remediation of specialized, migrated and restored images during create.
Enable Periodic Assessment for your Azure Arc-enabled machines by using Azure Policy
Go toPolicyin the Azure portal and selectAuthoring>Definitions.
From theCategorydropdown, selectAzure Update Manager. SelectConfigure periodic checking for missing system updates on Azure Arc-enabled serversfor Azure Arc-enabled machines.
WhenPolicy definitionopens, selectAssign.
On theBasicstab, select your subscription as your scope. You can also specify a resource group within your subscription as the scope. SelectNext.
On theParameterstab, clearOnly show parameters that need input or reviewso that you can see the values of parameters. Note thatAssessmentmode =AutomaticByPlatformby default.
Set theOS Typeparameter to be eitherWindowsorLinux. You need to create separate policies for Windows and Linux. SelectNext.
On theRemediationtab, selectCreate a remediation taskso that periodic assessment is enabled on your machines. SelectNext.
On theNon-compliance messagetab, provide the message that you want to see if there was noncompliance. For example, useYour machine doesn't have periodic assessment enabled.SelectReview + Create.
On theReview + Createtab, selectCreateto triggerAssignment and Remediation Taskcreation, which can take a minute or so.
You can monitor compliance of resources underComplianceand remediation status underRemediationon the Azure Policy home page.
Monitor if Periodic Assessment is enabled for your machines
This procedure applies to both Azure and Azure Arc-enabled machines.
Go toPolicyin the Azure portal and selectAuthoring>Definitions.
From theCategorydropdown, selectAzure Update Manager. SelectMachines should be configured to periodically check for missing system updates.
WhenPolicy definitionopens, selectAssign.
On theBasicstab, select your subscription as your scope. You can also specify a resource group within your subscription as the scope. SelectNext.
On theParametersandRemediationtabs, selectNext.
On theNon-compliance messagetab, provide the message that you want to see if there was noncompliance. For example, useYour machine doesn't have periodic assessment enabled.SelectReview + Create.
On theReview + Createtab, selectCreateto trigger theAssignmentcreation, which can take a minute or so.
You can monitor compliance of resources underComplianceand remediation status underRemediationon the Azure Policy home page.
Next steps
View assessment complianceanddeploy updatesfor a selected Azure VM or Azure Arc-enabled server, or acrossmultiple machinesin your subscription in the Azure portal.
To view update assessment and deployment logs generated by Update Manager, seeQuery logs.
To troubleshoot issues, seeTroubleshoot Update Manager.
Feedback
Was this page helpful?
Additional resources