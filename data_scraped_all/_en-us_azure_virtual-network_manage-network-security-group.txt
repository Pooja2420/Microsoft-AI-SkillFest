Note
Access to this page requires authorization. You can trysigning inorchanging directories.
Access to this page requires authorization. You can trychanging directories.
Create, change, or delete a network security group
Article
2025-04-07
26 contributors
In this article
When you use security rules in network security groups (NSGs), you can filter the type of network traffic that flows in and out of virtual network subnets and network interfaces. To learn more about NSGs, seeNetwork security group overview. Next, complete theFilter network traffictutorial to gain some experience with NSGs.
Prerequisites
If you don't have an Azure account with an active subscription,create one for free. Complete one of these tasks before you start the remainder of this article:
Portal users: Sign in to theAzure portalwith your Azure account.
Portal users: Sign in to theAzure portalwith your Azure account.
PowerShell users: Either run the commands inAzure Cloud Shellor run PowerShell locally from your computer. Cloud Shell is a free interactive shell that you can use to run the steps in this article. It has common Azure tools that are preinstalled and configured to use with your account. On the Cloud Shell browser tab, find theSelect environmentdropdown list. Then selectPowerShellif it isn't already selected.If you're running PowerShell locally, use Azure PowerShell module version 1.0.0 or later. RunGet-Module -ListAvailable Az.Networkto find the installed version. If you need to install or upgrade, seeInstall Azure PowerShell module. RunConnect-AzAccountto sign in to Azure.
PowerShell users: Either run the commands inAzure Cloud Shellor run PowerShell locally from your computer. Cloud Shell is a free interactive shell that you can use to run the steps in this article. It has common Azure tools that are preinstalled and configured to use with your account. On the Cloud Shell browser tab, find theSelect environmentdropdown list. Then selectPowerShellif it isn't already selected.
If you're running PowerShell locally, use Azure PowerShell module version 1.0.0 or later. RunGet-Module -ListAvailable Az.Networkto find the installed version. If you need to install or upgrade, seeInstall Azure PowerShell module. RunConnect-AzAccountto sign in to Azure.
Get-Module -ListAvailable Az.Network
Connect-AzAccount
Azure CLI users: Either run the commands inCloud Shellor run the Azure CLI locally from your computer. Cloud Shell is a free interactive shell that you can use to run the steps in this article. It has common Azure tools that are preinstalled and configured to use with your account. On the Cloud Shell browser tab, find theSelect environmentdropdown list. Then selectBashif it isn't already selected.If you're running the Azure CLI locally, use Azure CLI version 2.0.28 or later. Runaz --versionto find the installed version. If you need to install or upgrade, seeInstall the Azure CLI. Runaz loginto sign in to Azure.
Azure CLI users: Either run the commands inCloud Shellor run the Azure CLI locally from your computer. Cloud Shell is a free interactive shell that you can use to run the steps in this article. It has common Azure tools that are preinstalled and configured to use with your account. On the Cloud Shell browser tab, find theSelect environmentdropdown list. Then selectBashif it isn't already selected.
If you're running the Azure CLI locally, use Azure CLI version 2.0.28 or later. Runaz --versionto find the installed version. If you need to install or upgrade, seeInstall the Azure CLI. Runaz loginto sign in to Azure.
az --version
az login
Assign theNetwork Contributor roleor acustom rolewith the appropriatepermissions.
Work with network security groups
You can create,view all,view details of,change, anddeletean NSG. You can also associate or dissociate an NSG from anetwork interfaceor asubnet.
Create a network security group
The number of NSGs that you can create for each Azure region and subscription is limited. To learn more, seeAzure subscription and service limits, quotas, and constraints.
Portal
PowerShell
Azure CLI
In the search box at the top of the portal, enterNetwork security group. SelectNetwork security groupsin the search results.
In the search box at the top of the portal, enterNetwork security group. SelectNetwork security groupsin the search results.
Select+ Create.
Select+ Create.
On theCreate network security grouppage, under theBasicstab, enter or select the following values:SettingActionProject detailsSubscriptionSelect your Azure subscription.Resource groupSelect an existing resource group, or create a new one by selectingCreate new. This example uses themyResourceGroupresource group.Instance detailsNetwork security group nameEnter a name for the NSG that you're creating.RegionSelect the region that you want.
On theCreate network security grouppage, under theBasicstab, enter or select the following values:
myResourceGroup
SelectReview + create.
SelectReview + create.
After you see theValidation passedmessage, selectCreate.
After you see theValidation passedmessage, selectCreate.
UseNew-AzNetworkSecurityGroupto create an NSG namedmyNSGin theEast USregion. The NSG namedmyNSGis created in the existingmyResourceGroupresource group.
myNSG
myNSG
myResourceGroup
# Define parameters for the new network security group
$NSGParams = @{
    Name              = "myNSG"
    ResourceGroupName = "myResourceGroup"
    Location          = "eastus"
}

# Create the network security group
New-AzNetworkSecurityGroup @NSGParams
# Define parameters for the new network security group
$NSGParams = @{
    Name              = "myNSG"
    ResourceGroupName = "myResourceGroup"
    Location          = "eastus"
}

# Create the network security group
New-AzNetworkSecurityGroup @NSGParams
Useaz network nsg createto create an NSG namedmyNSGin the existingmyResourceGroupresource group.
myNSG
myResourceGroup
az network nsg create \
    --resource-group myResourceGroup \
    --name myNSG
az network nsg create \
    --resource-group myResourceGroup \
    --name myNSG
View all network security groups
Portal
PowerShell
Azure CLI
In the search box at the top of the portal, enterNetwork security group. SelectNetwork security groupsin the search results to see the list of NSGs in your subscription.

UseGet-AzNetworkSecurityGroupto list all the NSGs in your subscription.
Get-AzNetworkSecurityGroup | format-table Name, Location, ResourceGroupName, ProvisioningState, ResourceGuid
Get-AzNetworkSecurityGroup | format-table Name, Location, ResourceGroupName, ProvisioningState, ResourceGuid
Useaz network nsg listto list all the NSGs in your subscription.
az network nsg list --out table
az network nsg list --out table
View details of a network security group
Portal
PowerShell
Azure CLI
In the search box at the top of the portal, enterNetwork security groupand selectNetwork security groupsin the search results.
In the search box at the top of the portal, enterNetwork security groupand selectNetwork security groupsin the search results.
Select the name of your NSG.InSettings, view theInbound security rules,Outbound security rules,Network interfaces, andSubnetsto which the NSG is associated.InMonitoring, enable or disableDiagnostic settings. For more information, seeResource logging for a network security group.InHelp, viewEffective security rules. For more information, seeDiagnose a virtual machine (VM) network traffic filter problem.
Select the name of your NSG.
InSettings, view theInbound security rules,Outbound security rules,Network interfaces, andSubnetsto which the NSG is associated.
InSettings, view theInbound security rules,Outbound security rules,Network interfaces, andSubnetsto which the NSG is associated.
InMonitoring, enable or disableDiagnostic settings. For more information, seeResource logging for a network security group.
InMonitoring, enable or disableDiagnostic settings. For more information, seeResource logging for a network security group.
InHelp, viewEffective security rules. For more information, seeDiagnose a virtual machine (VM) network traffic filter problem.
InHelp, viewEffective security rules. For more information, seeDiagnose a virtual machine (VM) network traffic filter problem.

To learn more about the common Azure settings that are listed, see the following articles:
Activity log
Activity log
Access control identity and access management (IAM)
Access control identity and access management (IAM)
Tags
Tags
Locks
Locks
Automation script
Automation script
UseGet-AzNetworkSecurityGroupto view the details of an NSG.
# Define parameters for the network security group
$NSGParams = @{
    Name              = "myNSG"
    ResourceGroupName = "myResourceGroup"
}

# Retrieve the network security group
Get-AzNetworkSecurityGroup @NSGParams
# Define parameters for the network security group
$NSGParams = @{
    Name              = "myNSG"
    ResourceGroupName = "myResourceGroup"
}

# Retrieve the network security group
Get-AzNetworkSecurityGroup @NSGParams
To learn more about the common Azure settings that are listed, see the following articles:
Activity log
Activity log
Access control (IAM)
Access control (IAM)
Tags
Tags
Locks
Locks
Useaz network nsg showto view the details of an NSG.
az network nsg show \
    --resource-group myResourceGroup \
    --name myNSG
az network nsg show \
    --resource-group myResourceGroup \
    --name myNSG
To learn more about the common Azure settings that are listed, see the following articles:
Activity log
Activity log
Access control (IAM)
Access control (IAM)
Tags
Tags
Locks
Locks
Change a network security group
The most common changes to an NSG are:
Associate or dissociate a network security group to or from a network interface
Associate or dissociate a network security group to or from a network interface
Associate or dissociate a network security group to or from a subnet
Associate or dissociate a network security group to or from a subnet
Create a security rule
Create a security rule
Delete a security rule
Delete a security rule
Associate or dissociate a network security group to or from a network interface
For more information about the association and dissociation of an NSG, seeAssociate or dissociate a network security group.
Associate or dissociate a network security group to or from a subnet
Portal
PowerShell
Azure CLI
In the search box at the top of the portal, enterNetwork security group. Then selectNetwork security groupsin the search results.
In the search box at the top of the portal, enterNetwork security group. Then selectNetwork security groupsin the search results.
Select the name of your NSG, and then selectSubnets.To associate an NSG to the subnet, select+ Associate. Then select your virtual network and the subnet to which you want to associate the NSG. SelectOK.To dissociate an NSG from the subnet, select the three dots next to the subnet from which you want to dissociate the NSG, and then selectDissociate. SelectYes.
Select the name of your NSG, and then selectSubnets.
To associate an NSG to the subnet, select+ Associate. Then select your virtual network and the subnet to which you want to associate the NSG. SelectOK.
To associate an NSG to the subnet, select+ Associate. Then select your virtual network and the subnet to which you want to associate the NSG. SelectOK.

To dissociate an NSG from the subnet, select the three dots next to the subnet from which you want to dissociate the NSG, and then selectDissociate. SelectYes.
To dissociate an NSG from the subnet, select the three dots next to the subnet from which you want to dissociate the NSG, and then selectDissociate. SelectYes.

UseSet-AzVirtualNetworkSubnetConfigto associate or dissociate an NSG to or from a subnet.
# Define parameters for the virtual network and subnet configuration
$VNetParams = @{
    Name              = "myVNet"
    ResourceGroupName = "myResourceGroup"
}
$SubnetParams = @{
    Name              = "mySubnet"
    AddressPrefix     = "10.0.0.0/24"
    NetworkSecurityGroup = $networkSecurityGroup
}

# Retrieve the virtual network
$virtualNetwork = Get-AzVirtualNetwork @VNetParams

# Update the subnet configuration
Set-AzVirtualNetworkSubnetConfig -VirtualNetwork $virtualNetwork @SubnetParams

# Update the virtual network
Set-AzVirtualNetwork -VirtualNetwork $virtualNetwork
# Define parameters for the virtual network and subnet configuration
$VNetParams = @{
    Name              = "myVNet"
    ResourceGroupName = "myResourceGroup"
}
$SubnetParams = @{
    Name              = "mySubnet"
    AddressPrefix     = "10.0.0.0/24"
    NetworkSecurityGroup = $networkSecurityGroup
}

# Retrieve the virtual network
$virtualNetwork = Get-AzVirtualNetwork @VNetParams

# Update the subnet configuration
Set-AzVirtualNetworkSubnetConfig -VirtualNetwork $virtualNetwork @SubnetParams

# Update the virtual network
Set-AzVirtualNetwork -VirtualNetwork $virtualNetwork
Useaz network vnet subnet updateto associate or dissociate an NSG to or from a subnet.
az network vnet subnet update \
    --resource-group myResourceGroup \
    --vnet-name myVNet \
    --name mySubnet \
    --network-security-group myNSG
az network vnet subnet update \
    --resource-group myResourceGroup \
    --vnet-name myVNet \
    --name mySubnet \
    --network-security-group myNSG
Delete a network security group
If an NSG is associated to any subnets or network interfaces, it can't be deleted. Dissociate an NSG from all subnets and network interfaces before you attempt to delete it.
Portal
PowerShell
Azure CLI
In the search box at the top of the portal, enterNetwork security group. Then selectNetwork security groupsin the search results.
In the search box at the top of the portal, enterNetwork security group. Then selectNetwork security groupsin the search results.
Select the NSG that you want to delete.
Select the NSG that you want to delete.
SelectDelete, and then selectYesin the confirmation dialog box.
SelectDelete, and then selectYesin the confirmation dialog box.

UseRemove-AzNetworkSecurityGroupto delete an NSG.
# Define parameters for the network security group to be removed
$NSGParams = @{
    Name              = "myNSG"
    ResourceGroupName = "myResourceGroup"
}

# Remove the network security group
Remove-AzNetworkSecurityGroup @NSGParams
# Define parameters for the network security group to be removed
$NSGParams = @{
    Name              = "myNSG"
    ResourceGroupName = "myResourceGroup"
}

# Remove the network security group
Remove-AzNetworkSecurityGroup @NSGParams
Useaz network nsg deleteto delete an NSG.
az network nsg delete \
    --resource-group myResourceGroup \
    --name myNSG
az network nsg delete \
    --resource-group myResourceGroup \
    --name myNSG
Work with security rules
An NSG contains zero or more security rules. You cancreate,view all,view details of,change, anddeletea security rule.
Create a security rule
The number of rules per NSG that you can create for each Azure location and subscription is limited. To learn more, seeAzure subscription and service limits, quotas, and constraints.
Portal
PowerShell
Azure CLI
In the search box at the top of the portal, enterNetwork security group. Then selectNetwork security groupsin the search results.
In the search box at the top of the portal, enterNetwork security group. Then selectNetwork security groupsin the search results.
Select the name of the NSG to which you want to add a security rule.
Select the name of the NSG to which you want to add a security rule.
SelectInbound security rulesorOutbound security rules.When you create an NSG, several default security rules are created in it. To learn more, seeDefault security rules. You can't delete default security rules, but you can override them with rules that have a higher priority.
SelectInbound security rulesorOutbound security rules.
When you create an NSG, several default security rules are created in it. To learn more, seeDefault security rules. You can't delete default security rules, but you can override them with rules that have a higher priority.
Select+ Add. Select or add values for the following settings, and then selectAdd.SettingValueDetailsSourceOne of:AnyIP AddressesMy IP addressService TagApplication security groupIf you selectIP Addresses, you must also specifySource IP addresses/CIDR ranges.If you selectService Tag, you must also select aSource service tag.If you selectApplication security group, you must also select an existing application security group. If you selectApplication security groupfor bothSourceandDestination, the network interfaces within both application security groups must be in the same virtual network. Learn how tocreate an application security group.Source IP addresses/CIDR rangesA comma-delimited list of IP addresses and Classless Interdomain Routing (CIDR) rangesThis setting appears if you setSourcetoIP Addresses. You must specify a single value or comma-separated list of multiple values. An example of multiple values is10.0.0.0/16, 192.188.1.1. The number of values that you can specify is limited. For more information, seeAzure limits.If the IP address that you specify is assigned to an Azure VM, specify its private IP address, not its public IP address. Azure processes security rules after it translates the public IP address to a private IP address for inbound security rules, but before it translates a private IP address to a public IP address for outbound rules. To learn more about IP addresses in Azure, seePublic IP addressesandPrivate IP addresses.Source service tagA service tag from the dropdown listThis setting appears if you setSourcetoService Tagfor a security rule. A service tag is a predefined identifier for a category of IP addresses. To learn more about available service tags, and what each tag represents, seeService tags.Source application security groupAn existing application security groupThis setting appears if you setSourcetoApplication security group. Select an application security group that exists in the same region as the network interface. Learn how tocreate an application security group.Source port rangesOne of:A single port, such as80A range of ports, such as1024-65535A comma-separated list of single ports and/or port ranges, such as80, 1024-65535An asterisk (*) to allow traffic on any portThis setting specifies the ports on which the rule allows or denies traffic. The number of ports that you can specify is limited. For more information, seeAzure limits.DestinationOne of:AnyIP AddressesService TagApplication security groupIf you selectIP Addresses, you must also specifyDestination IP addresses/CIDR ranges.If you selectService Tag, you must also select aDestination service tag.If you selectApplication security group, you must also select an existing application security group. If you selectApplication security groupfor bothSourceandDestination, the network interfaces within both application security groups must be in the same virtual network. Learn how tocreate an application security group.Destination IP addresses/CIDR rangesA comma-delimited list of IP addresses and CIDR rangesThis setting appears if you changeDestinationtoIP Addresses. You can specify single or multiple addresses or ranges like you can do withSourceandSource IP addresses/CIDR ranges. The number that you can specify is limited. For more information, seeAzure limits.If the IP address that you specify is assigned to an Azure VM, ensure that you specify its private IP, not its public IP address. Azure processes security rules after it translates the public IP address to a private IP address for inbound security rules, but before Azure translates a private IP address to a public IP address for outbound rules. To learn more about IP addresses in Azure, seePublic IP addressesandPrivate IP addresses.Destination service tagA service tag from the dropdown listThis setting appears if you setDestinationtoService Tagfor a security rule. A service tag is a predefined identifier for a category of IP addresses. To learn more about available service tags, and what each tag represents, seeService tags.Destination application security groupAn existing application security groupThis setting appears if you setDestinationtoApplication security group. Select an application security group that exists in the same region as the network interface. Learn how tocreate an application security group.ServiceA destination protocol from the dropdown listThis setting specifies the destination protocol and port range for the security rule. You can select a predefined service, likeRDP, or selectCustomand provide the port range inDestination port ranges.Destination port rangesOne of:A single port, such as80A range of ports, such as1024-65535A comma-separated list of single ports and/or port ranges, such as80, 1024-65535An asterisk (*) to allow traffic on any portAs withSource port ranges, you can specify single or multiple ports and ranges. The number that you can specify is limited. For more information, seeAzure limits.ProtocolAny,TCP,UDP, orICMPYou can restrict the rule to the Transmission Control Protocol (TCP), User Datagram Protocol (UDP), or Internet Control Message Protocol (ICMP). The default is for the rule to apply to all protocols (Any).ActionAlloworDenyThis setting specifies whether this rule allows or denies access for the supplied source and destination configuration.PriorityA value between 100 and 4,096 that's unique for all security rules within the NSGAzure processes security rules in priority order. The lower the number, the higher the priority. We recommend that you leave a gap between priority numbers when you create rules, such as 100, 200, and 300. Leaving gaps makes it easier to add rules in the future so that you can give them higher or lower priority than existing rules.NameA unique name for the rule within the NSGThe name can be up to 80 characters. It must begin with a letter or number, and it must end with a letter, number, or underscore. The name can contain only letters, numbers, underscores, periods, or hyphens.DescriptionA text descriptionYou can optionally specify a text description for the security rule. The description can't be longer than 140 characters.
Select+ Add. Select or add values for the following settings, and then selectAdd.
Any
IP Addresses
My IP address
Service Tag
Application security group
If you selectIP Addresses, you must also specifySource IP addresses/CIDR ranges.
If you selectService Tag, you must also select aSource service tag.
If you selectApplication security group, you must also select an existing application security group. If you selectApplication security groupfor bothSourceandDestination, the network interfaces within both application security groups must be in the same virtual network. Learn how tocreate an application security group.
This setting appears if you setSourcetoIP Addresses. You must specify a single value or comma-separated list of multiple values. An example of multiple values is10.0.0.0/16, 192.188.1.1. The number of values that you can specify is limited. For more information, seeAzure limits.
10.0.0.0/16, 192.188.1.1
If the IP address that you specify is assigned to an Azure VM, specify its private IP address, not its public IP address. Azure processes security rules after it translates the public IP address to a private IP address for inbound security rules, but before it translates a private IP address to a public IP address for outbound rules. To learn more about IP addresses in Azure, seePublic IP addressesandPrivate IP addresses.
A single port, such as80
80
A range of ports, such as1024-65535
1024-65535
A comma-separated list of single ports and/or port ranges, such as80, 1024-65535
80, 1024-65535
An asterisk (*) to allow traffic on any port
*
Any
IP Addresses
Service Tag
Application security group
If you selectIP Addresses, you must also specifyDestination IP addresses/CIDR ranges.
If you selectService Tag, you must also select aDestination service tag.
If you selectApplication security group, you must also select an existing application security group. If you selectApplication security groupfor bothSourceandDestination, the network interfaces within both application security groups must be in the same virtual network. Learn how tocreate an application security group.
This setting appears if you changeDestinationtoIP Addresses. You can specify single or multiple addresses or ranges like you can do withSourceandSource IP addresses/CIDR ranges. The number that you can specify is limited. For more information, seeAzure limits.
If the IP address that you specify is assigned to an Azure VM, ensure that you specify its private IP, not its public IP address. Azure processes security rules after it translates the public IP address to a private IP address for inbound security rules, but before Azure translates a private IP address to a public IP address for outbound rules. To learn more about IP addresses in Azure, seePublic IP addressesandPrivate IP addresses.
A single port, such as80
80
A range of ports, such as1024-65535
1024-65535
A comma-separated list of single ports and/or port ranges, such as80, 1024-65535
80, 1024-65535
An asterisk (*) to allow traffic on any port
*

UseAdd-AzNetworkSecurityRuleConfigto create an NSG rule.
# Define parameters for the network security group and security rule
$NSGParams = @{
    Name              = "myNSG"
    ResourceGroupName = "myResourceGroup"
}
$RuleParams = @{
    Name                 = "RDP-rule"
    Description          = "Allow RDP"
    Access               = "Allow"
    Protocol             = "Tcp"
    Direction            = "Inbound"
    Priority             = 300
    SourceAddressPrefix  = "*"
    SourcePortRange      = "*"
    DestinationAddressPrefix = "*"
    DestinationPortRange = 3389
}

# Retrieve the network security group
$networkSecurityGroup = Get-AzNetworkSecurityGroup @NSGParams

# Add the security rule to the network security group
Add-AzNetworkSecurityRuleConfig -NetworkSecurityGroup $networkSecurityGroup @RuleParams

# Update the network security group
Set-AzNetworkSecurityGroup -NetworkSecurityGroup $networkSecurityGroup
# Define parameters for the network security group and security rule
$NSGParams = @{
    Name              = "myNSG"
    ResourceGroupName = "myResourceGroup"
}
$RuleParams = @{
    Name                 = "RDP-rule"
    Description          = "Allow RDP"
    Access               = "Allow"
    Protocol             = "Tcp"
    Direction            = "Inbound"
    Priority             = 300
    SourceAddressPrefix  = "*"
    SourcePortRange      = "*"
    DestinationAddressPrefix = "*"
    DestinationPortRange = 3389
}

# Retrieve the network security group
$networkSecurityGroup = Get-AzNetworkSecurityGroup @NSGParams

# Add the security rule to the network security group
Add-AzNetworkSecurityRuleConfig -NetworkSecurityGroup $networkSecurityGroup @RuleParams

# Update the network security group
Set-AzNetworkSecurityGroup -NetworkSecurityGroup $networkSecurityGroup
Useaz network nsg rule createto create an NSG rule.
az network nsg rule create \
    --resource-group myResourceGroup \
    --nsg-name myNSG \
    --name RDP-rule \
    --priority 300 \
    --destination-address-prefixes '*' \
    --destination-port-ranges 3389 \
    --protocol Tcp \
    --description "Allow RDP"
az network nsg rule create \
    --resource-group myResourceGroup \
    --nsg-name myNSG \
    --name RDP-rule \
    --priority 300 \
    --destination-address-prefixes '*' \
    --destination-port-ranges 3389 \
    --protocol Tcp \
    --description "Allow RDP"
To duplicate existing security rules, you can export the JSON of the existing NSG, extract thesecurityRules, and include it in your ARM template.
securityRules
In the search box at the top of the portal, enterNetwork security group. Then selectNetwork security groupsin the search results.
In the search box at the top of the portal, enterNetwork security group. Then selectNetwork security groupsin the search results.
Select the name of the NSG for which you want to duplicate the rules.
Select the name of the NSG for which you want to duplicate the rules.
In the NSG'sOverviewpage, expand theEssentialssection and select theJSON Viewlink on the far right.
In the NSG'sOverviewpage, expand theEssentialssection and select theJSON Viewlink on the far right.
In theResource JSONhalf-pane, find"properties". Within"properties", find"securityRules". Copy the full object of the security rule or rules you want to duplicate.
In theResource JSONhalf-pane, find"properties". Within"properties", find"securityRules". Copy the full object of the security rule or rules you want to duplicate.
"properties"
"properties"
"securityRules"
In the search box at the top of the portal, enterDeploy a custom templateand select it in the search results.
In the search box at the top of the portal, enterDeploy a custom templateand select it in the search results.
In theCustom deploymentpage, selectBuild your own template in the editor.
In theCustom deploymentpage, selectBuild your own template in the editor.
In theEdit templatepage, specify the existing NSG where you want to duplicate the rules to through its name and location. Within the"properties"->"securityRules"of the NSG, paste the copied security rule object or objects.
In theEdit templatepage, specify the existing NSG where you want to duplicate the rules to through its name and location. Within the"properties"->"securityRules"of the NSG, paste the copied security rule object or objects.
"properties"
"securityRules"
SelectSave. Select the desired subscription, resource group, and region, then selectReview + create.
SelectSave. Select the desired subscription, resource group, and region, then selectReview + create.
View all security rules
An NSG contains zero or more rules. To learn more about the list of information when you view the rules, seeSecurity rules.
Portal
PowerShell
Azure CLI
In the search box at the top of the portal, enterNetwork security group. Then selectNetwork security groupsin the search results.
In the search box at the top of the portal, enterNetwork security group. Then selectNetwork security groupsin the search results.
Select the name of the NSG for which you want to view the rules.
Select the name of the NSG for which you want to view the rules.
SelectInbound security rulesorOutbound security rules.The list contains any rules that you created and thedefault security rulesof your NSG.
SelectInbound security rulesorOutbound security rules.
The list contains any rules that you created and thedefault security rulesof your NSG.

UseGet-AzNetworkSecurityRuleConfigto view the security rules of an NSG.
# Define parameters for the network security group
$NSGParams = @{
    Name              = "myNSG"
    ResourceGroupName = "myResourceGroup"
}

# Retrieve the network security group
$networkSecurityGroup = Get-AzNetworkSecurityGroup @NSGParams

# List security rules of the network security group in a table
Get-AzNetworkSecurityRuleConfig -NetworkSecurityGroup $networkSecurityGroup | Format-Table Name, Protocol, Access, Priority, Direction, SourcePortRange, DestinationPortRange, SourceAddressPrefix, DestinationAddressPrefix
# Define parameters for the network security group
$NSGParams = @{
    Name              = "myNSG"
    ResourceGroupName = "myResourceGroup"
}

# Retrieve the network security group
$networkSecurityGroup = Get-AzNetworkSecurityGroup @NSGParams

# List security rules of the network security group in a table
Get-AzNetworkSecurityRuleConfig -NetworkSecurityGroup $networkSecurityGroup | Format-Table Name, Protocol, Access, Priority, Direction, SourcePortRange, DestinationPortRange, SourceAddressPrefix, DestinationAddressPrefix
Useaz network nsg rule listto view the security rules of an NSG.
az network nsg rule list \
    --resource-group myResourceGroup \
    --nsg-name myNSG
az network nsg rule list \
    --resource-group myResourceGroup \
    --nsg-name myNSG
View the details of a security rule
Portal
PowerShell
Azure CLI
In the search box at the top of the portal, enterNetwork security group. Then selectNetwork security groupsin the search results.
In the search box at the top of the portal, enterNetwork security group. Then selectNetwork security groupsin the search results.
Select the name of the NSG for which you want to view the rules.
Select the name of the NSG for which you want to view the rules.
SelectInbound security rulesorOutbound security rules.
SelectInbound security rulesorOutbound security rules.
Select the rule for which you want to view details. For an explanation of all settings, seeSecurity rule settings.NoteThis procedure applies only to a custom security rule. It doesn't work if you choose a default security rule.
Select the rule for which you want to view details. For an explanation of all settings, seeSecurity rule settings.
Note
This procedure applies only to a custom security rule. It doesn't work if you choose a default security rule.

UseGet-AzNetworkSecurityRuleConfigto view the details of a security rule.
# Define parameters for the network security group and security rule
$NSGParams = @{
    Name              = "myNSG"
    ResourceGroupName = "myResourceGroup"
}
$RuleParams = @{
    Name = "RDP-rule"
}

# Retrieve the network security group
$networkSecurityGroup = Get-AzNetworkSecurityGroup @NSGParams

# View details of the security rule
Get-AzNetworkSecurityRuleConfig -NetworkSecurityGroup $networkSecurityGroup @RuleParams
# Define parameters for the network security group and security rule
$NSGParams = @{
    Name              = "myNSG"
    ResourceGroupName = "myResourceGroup"
}
$RuleParams = @{
    Name = "RDP-rule"
}

# Retrieve the network security group
$networkSecurityGroup = Get-AzNetworkSecurityGroup @NSGParams

# View details of the security rule
Get-AzNetworkSecurityRuleConfig -NetworkSecurityGroup $networkSecurityGroup @RuleParams
Note
This procedure applies only to a custom security rule. It doesn't work if you choose a default security rule.
Useaz network nsg rule showto view the details of a security rule.
az network nsg rule show \
    --resource-group myResourceGroup \
    --nsg-name myNSG \
    --name RDP-rule
az network nsg rule show \
    --resource-group myResourceGroup \
    --nsg-name myNSG \
    --name RDP-rule
Note
This procedure applies only to a custom security rule. It doesn't work if you choose a default security rule.
Change a security rule
Portal
PowerShell
Azure CLI
In the search box at the top of the portal, enterNetwork security group. Then selectNetwork security groupsin the search results.
In the search box at the top of the portal, enterNetwork security group. Then selectNetwork security groupsin the search results.
Select the name of the NSG for which you want to view the rules.
Select the name of the NSG for which you want to view the rules.
SelectInbound security rulesorOutbound security rules.
SelectInbound security rulesorOutbound security rules.
Select the rule that you want to change.
Select the rule that you want to change.
Change the settings as needed, and then selectSave. For an explanation of all settings, seeSecurity rule settings.NoteThis procedure applies only to a custom security rule. You aren't allowed to change a default security rule.
Change the settings as needed, and then selectSave. For an explanation of all settings, seeSecurity rule settings.

Note
This procedure applies only to a custom security rule. You aren't allowed to change a default security rule.
UseSet-AzNetworkSecurityRuleConfigto update an NSG rule.
# Define parameters for the network security group and security rule
$NSGParams = @{
    Name              = "myNSG"
    ResourceGroupName = "myResourceGroup"
}
$RuleParams = @{
    Name                 = "RDP-rule"
    Description          = "Allow RDP"
    Access               = "Allow"
    Protocol             = "Tcp"
    Direction            = "Inbound"
    Priority             = 200
    SourceAddressPrefix  = "*"
    SourcePortRange      = "*"
    DestinationAddressPrefix = "*"
    DestinationPortRange = 3389
}

# Retrieve the network security group
$networkSecurityGroup = Get-AzNetworkSecurityGroup @NSGParams

# Update the security rule in the network security group
Set-AzNetworkSecurityRuleConfig -NetworkSecurityGroup $networkSecurityGroup @RuleParams

# Update the network security group
Set-AzNetworkSecurityGroup -NetworkSecurityGroup $networkSecurityGroup
# Define parameters for the network security group and security rule
$NSGParams = @{
    Name              = "myNSG"
    ResourceGroupName = "myResourceGroup"
}
$RuleParams = @{
    Name                 = "RDP-rule"
    Description          = "Allow RDP"
    Access               = "Allow"
    Protocol             = "Tcp"
    Direction            = "Inbound"
    Priority             = 200
    SourceAddressPrefix  = "*"
    SourcePortRange      = "*"
    DestinationAddressPrefix = "*"
    DestinationPortRange = 3389
}

# Retrieve the network security group
$networkSecurityGroup = Get-AzNetworkSecurityGroup @NSGParams

# Update the security rule in the network security group
Set-AzNetworkSecurityRuleConfig -NetworkSecurityGroup $networkSecurityGroup @RuleParams

# Update the network security group
Set-AzNetworkSecurityGroup -NetworkSecurityGroup $networkSecurityGroup
Note
This procedure applies only to a custom security rule. You aren't allowed to change a default security rule.
Useaz network nsg rule updateto update an NSG rule.
az network nsg rule update \
    --resource-group myResourceGroup \
    --nsg-name myNSG \
    --name RDP-rule \
    --priority 200
az network nsg rule update \
    --resource-group myResourceGroup \
    --nsg-name myNSG \
    --name RDP-rule \
    --priority 200
Note
This procedure applies only to a custom security rule. You aren't allowed to change a default security rule.
Delete a security rule
Portal
PowerShell
Azure CLI
In the search box at the top of the portal, enterNetwork security group. Then selectNetwork security groupsin the search results.
In the search box at the top of the portal, enterNetwork security group. Then selectNetwork security groupsin the search results.
Select the name of the NSG for which you want to view the rules.
Select the name of the NSG for which you want to view the rules.
SelectInbound security rulesorOutbound security rules.
SelectInbound security rulesorOutbound security rules.
Select the rules that you want to delete.
Select the rules that you want to delete.
SelectDelete, and then selectYes.NoteThis procedure applies only to a custom security rule. You aren't allowed to delete a default security rule.
SelectDelete, and then selectYes.

Note
This procedure applies only to a custom security rule. You aren't allowed to delete a default security rule.
UseRemove-AzNetworkSecurityRuleConfigto delete a security rule from an NSG.
# Define parameters for the network security group and security rule
$NSGParams = @{
    Name              = "myNSG"
    ResourceGroupName = "myResourceGroup"
}
$RuleParams = @{
    Name = "RDP-rule"
}

# Retrieve the network security group
$networkSecurityGroup = Get-AzNetworkSecurityGroup @NSGParams

# Remove the security rule from the network security group
Remove-AzNetworkSecurityRuleConfig -NetworkSecurityGroup $networkSecurityGroup @RuleParams

# Update the network security group
Set-AzNetworkSecurityGroup -NetworkSecurityGroup $networkSecurityGroup
# Define parameters for the network security group and security rule
$NSGParams = @{
    Name              = "myNSG"
    ResourceGroupName = "myResourceGroup"
}
$RuleParams = @{
    Name = "RDP-rule"
}

# Retrieve the network security group
$networkSecurityGroup = Get-AzNetworkSecurityGroup @NSGParams

# Remove the security rule from the network security group
Remove-AzNetworkSecurityRuleConfig -NetworkSecurityGroup $networkSecurityGroup @RuleParams

# Update the network security group
Set-AzNetworkSecurityGroup -NetworkSecurityGroup $networkSecurityGroup
Note
This procedure applies only to a custom security rule. You aren't allowed to change a default security rule.
Useaz network nsg rule deleteto delete a security rule from an NSG.
az network nsg rule delete \
    --resource-group myResourceGroup \
    --nsg-name myNSG \
    --name RDP-rule
az network nsg rule delete \
    --resource-group myResourceGroup \
    --nsg-name myNSG \
    --name RDP-rule
Note
This procedure applies only to a custom security rule. You aren't allowed to change a default security rule.
Work with application security groups
An application security group contains zero or more network interfaces. To learn more, seeApplication security groups. All network interfaces in an application security group must exist in the same virtual network. To learn how to add a network interface to an application security group, seeAdd a network interface to an application security group.
Create an application security group
Portal
PowerShell
Azure CLI
In the search box at the top of the portal, enterApplication security group. Then selectApplication security groupsin the search results.
In the search box at the top of the portal, enterApplication security group. Then selectApplication security groupsin the search results.
Select+ Create.
Select+ Create.
On theCreate an application security grouppage, under theBasicstab, enter or select the following values:SettingActionProject detailsSubscriptionSelect your Azure subscription.Resource groupSelect an existing resource group, or create a new one by selectingCreate new. This example uses themyResourceGroupresource group.Instance detailsNameEnter a name for the application security group that you're creating.RegionSelect the region in which you want to create the application security group.
On theCreate an application security grouppage, under theBasicstab, enter or select the following values:
myResourceGroup
SelectReview + create.
SelectReview + create.
After you see theValidation passedmessage, selectCreate.
After you see theValidation passedmessage, selectCreate.
UseNew-AzApplicationSecurityGroupto create an application security group.
# Define parameters for the new application security group
$ASGParams = @{
    ResourceGroupName = "myResourceGroup"
    Name              = "myASG"
    Location          = "eastus"
}

# Create the application security group
New-AzApplicationSecurityGroup @ASGParams
# Define parameters for the new application security group
$ASGParams = @{
    ResourceGroupName = "myResourceGroup"
    Name              = "myASG"
    Location          = "eastus"
}

# Create the application security group
New-AzApplicationSecurityGroup @ASGParams
Useaz network asg createto create an application security group.
az network asg create \
    --resource-group myResourceGroup \
    --name myASG \
    --location eastus
az network asg create \
    --resource-group myResourceGroup \
    --name myASG \
    --location eastus
View all application security groups
Portal
PowerShell
Azure CLI
In the search box at the top of the portal, enterApplication security group. Then selectApplication security groupsin the search results. A list of your application security groups appears in the Azure portal.

UseGet-AzApplicationSecurityGroupto list all the application security groups in your Azure subscription.
Get-AzApplicationSecurityGroup | format-table Name, ResourceGroupName, Location
Get-AzApplicationSecurityGroup | format-table Name, ResourceGroupName, Location
Useaz network asg listto list all the application security groups in a resource group.
az network asg list \
    --resource-group myResourceGroup \
    --out table
az network asg list \
    --resource-group myResourceGroup \
    --out table
View the details of a specific application security group
Portal
PowerShell
Azure CLI
In the search box at the top of the portal, enterApplication security group. Then selectApplication security groupsin the search results.
In the search box at the top of the portal, enterApplication security group. Then selectApplication security groupsin the search results.
Select the application security group for which you want to view the details.
Select the application security group for which you want to view the details.
UseGet-AzApplicationSecurityGroupto view the details of an application security group.
Get-AzApplicationSecurityGroup -Name myASG
Get-AzApplicationSecurityGroup -Name myASG
Useaz network asg showto view the details of an application security group.
az network asg show \
    --resource-group myResourceGroup \
    --name myASG
az network asg show \
    --resource-group myResourceGroup \
    --name myASG
Change an application security group
Portal
PowerShell
Azure CLI
In the search box at the top of the portal, enterApplication security group. Then selectApplication security groupsin the search results.
In the search box at the top of the portal, enterApplication security group. Then selectApplication security groupsin the search results.
Select the application security group that you want to change:Selectmovenext toResource grouporSubscriptionto change the resource group or subscription, respectively.Selecteditnext toTagsto add or remove tags. To learn more, seeUse tags to organize your Azure resources and management hierarchy.NoteYou can't change the location of an application security group.SelectAccess control (IAM)to assign or remove permissions to the application security group.
Select the application security group that you want to change:
Selectmovenext toResource grouporSubscriptionto change the resource group or subscription, respectively.
Selectmovenext toResource grouporSubscriptionto change the resource group or subscription, respectively.
Selecteditnext toTagsto add or remove tags. To learn more, seeUse tags to organize your Azure resources and management hierarchy.NoteYou can't change the location of an application security group.
Selecteditnext toTagsto add or remove tags. To learn more, seeUse tags to organize your Azure resources and management hierarchy.

Note
You can't change the location of an application security group.
SelectAccess control (IAM)to assign or remove permissions to the application security group.
SelectAccess control (IAM)to assign or remove permissions to the application security group.
# Define parameters for the application security group
$ASGParams = @{
    ResourceGroupName = "myResourceGroup"
    Name              = "myASG"
}

# Retrieve the application security group
$applicationSecurityGroup = Get-AzApplicationSecurityGroup @ASGParams

New-AzTag -ResourceId $applicationSecurityGroup.Id -Tag @{ Dept = "Finance" }
# Define parameters for the application security group
$ASGParams = @{
    ResourceGroupName = "myResourceGroup"
    Name              = "myASG"
}

# Retrieve the application security group
$applicationSecurityGroup = Get-AzApplicationSecurityGroup @ASGParams

New-AzTag -ResourceId $applicationSecurityGroup.Id -Tag @{ Dept = "Finance" }
Useaz network asg updateto update the tags for an application security group.
az network asg update \
    --resource-group myResourceGroup \
    --name myASG \
    --tags Dept=Finance
az network asg update \
    --resource-group myResourceGroup \
    --name myASG \
    --tags Dept=Finance
Note
You can't change the resource group, subscription, or location of an application security group by using the Azure CLI.
Delete an application security group
You can't delete an application security group if it contains any network interfaces. To remove all network interfaces from the application security group, either change the network interface settings or delete the network interfaces. To learn more, seeAdd or remove from application security groupsorDelete a network interface.
Portal
PowerShell
Azure CLI
In the search box at the top of the portal, enterApplication security group. Then selectApplication security groupsin the search results.
In the search box at the top of the portal, enterApplication security group. Then selectApplication security groupsin the search results.
Select the application security group that you want to delete.
Select the application security group that you want to delete.
SelectDelete, and then selectYesto delete the application security group.
SelectDelete, and then selectYesto delete the application security group.

UseRemove-AzApplicationSecurityGroupto delete an application security group.
# Define parameters for the application security group to be removed
$ASGParams = @{
    ResourceGroupName = "myResourceGroup"
    Name              = "myASG"
}

# Remove the application security group
Remove-AzApplicationSecurityGroup @ASGParams
# Define parameters for the application security group to be removed
$ASGParams = @{
    ResourceGroupName = "myResourceGroup"
    Name              = "myASG"
}

# Remove the application security group
Remove-AzApplicationSecurityGroup @ASGParams
Useaz network asg deleteto delete an application security group.
az network asg delete \
    --resource-group myResourceGroup \
    --name myASG
az network asg delete \
    --resource-group myResourceGroup \
    --name myASG
Permissions
To manage NSGs, security rules, and application security groups, your account must be assigned to theNetwork Contributorrole. You can also use acustom rolewith the appropriate permissions assigned, as listed in the following tables.
Note
You mightnotsee the full list of service tags if the Network Contributor role was assigned at a resource group level. To view the full list, you can assign this role at a subscription scope instead. If you can only allow the Network Contributor role for the resource group, you can then also create a custom role for the permissionsMicrosoft.Network/locations/serviceTags/readandMicrosoft.Network/locations/serviceTagDetails/read. Assign them at a subscription scope along with the Network Contributor role at the resource group scope.
Microsoft.Network/locations/serviceTags/read
Microsoft.Network/locations/serviceTagDetails/read
Network security group
Microsoft.Network/networkSecurityGroups/read
Microsoft.Network/networkSecurityGroups/write
Microsoft.Network/networkSecurityGroups/delete
Microsoft.Network/networkSecurityGroups/join/action
Note
To performwriteoperations on an NSG, the subscription account must have at leastreadpermissions for the resource group along withMicrosoft.Network/networkSecurityGroups/writepermission.
write
read
Microsoft.Network/networkSecurityGroups/write
Network security group rule
Microsoft.Network/networkSecurityGroups/securityRules/read
Microsoft.Network/networkSecurityGroups/securityRules/write
Microsoft.Network/networkSecurityGroups/securityRules/delete
Application security group
Microsoft.Network/applicationSecurityGroups/joinIpConfiguration/action
Microsoft.Network/applicationSecurityGroups/joinNetworkSecurityRule/action
Microsoft.Network/applicationSecurityGroups/read
Microsoft.Network/applicationSecurityGroups/write
Microsoft.Network/applicationSecurityGroups/delete
Related content
Add or removea network interface to or from an application security group.
Add or removea network interface to or from an application security group.
Create and assignAzure Policy definitionsfor virtual networks.
Create and assignAzure Policy definitionsfor virtual networks.
Feedback
Was this page helpful?
Additional resources