Note
Access to this page requires authorization. You can trysigning inorchanging directories.
Access to this page requires authorization. You can trychanging directories.
Query/management HTTP response
Article
2024-08-12
8 contributors
In this article
Applies to: 창혵Microsoft Fabric창혵Azure Data Explorer
Response status
The HTTP response status line follows the HTTP standard response codes.
For example, code 200 indicates success.
The following status codes are currently in use, although any valid HTTP code may be returned.
Note
The 200 status code shows that the request processing has successfully started,
and not that it has successfully completed.
Failures encountered during request processing after the 200 status code
has returned are called "partial query failures", and when they
are encountered, special indicators are injected into the response stream
to alert the client that they occurred.
Response headers
The following custom headers will be returned.
x-ms-client-request-id
x-ms-activity-id
Response body
If the status code is 200, the response body is a JSON document that encodes
the query or management command's results as a sequence of rectangular tables.
See below for details.
Note
The sequence of tables is reflected by the SDK. For example, when using the
.NET Framework Kusto.Data library, the sequence of tables then becomes
the results in theSystem.Data.IDataReaderobject returned by the SDK.
System.Data.IDataReader
If the status code indicates a 4xx or a 5xx error, other than 401,
the response body is a JSON document that encodes the details of the failure.
For more information, seeMicrosoft REST API Guidelines.
Note
If theAcceptheader is not included with the request, the response body
of a failure is not necessarily a JSON document.
Accept
JSON encoding of a sequence of tables
The JSON encoding of a sequence of tables is a single JSON property bag with
the following name/value pairs.
The Table property bag has the following name/value pairs.
The Column property bag has the following name/value pairs.
The Row array has the same order as the respective Columns array.
The Row array also has one element that coincides with the value of the row for the relevant column.
Scalar data types that can't be represented in JSON, such asdatetimeandtimespan, are represented as JSON strings.
datetime
timespan
The following example shows one possible such object, when it contains
a single table calledTable_0that has a single columnTextof typestring, and a single row.
Table_0
Text
string
{
    "Tables": [{
        "TableName": "Table_0",
        "Columns": [{
            "ColumnName": "Text",
            "DataType": "String",
            "ColumnType": "string"
        }],
        "Rows": [["Hello, World!"]]
}
{
    "Tables": [{
        "TableName": "Table_0",
        "Columns": [{
            "ColumnName": "Text",
            "DataType": "String",
            "ColumnType": "string"
        }],
        "Rows": [["Hello, World!"]]
}
Another example:

The meaning of tables in the response
In most cases, management commands return a result with a single table, containing the information generated by the management command. For example, the.show databasescommand returns a single table with the details of all accessible databases.
.show databases
Queries generally return multiple tables.
For eachtabular expression statement,
one or more tables are generated in-order, representing the results produced by the statement.
Note
There can be multiple such tables because ofbatchesandfork operators.
Three tables are often produced:
An@ExtendedPropertiestable that provides additional values, such as client visualization
instructions (information provided by therender operator),
information about the query's effectivedatabase cursor,
or information about the query's effective use of thequery results cache.For queries sent using the v1 protocol, the table has a single column of typestring,
whose value is a JSON-encoded string, such as:Value{"Visualization":"piechart",...}{"Cursor":"637239957206013576"}For queries sent using the v2 protocol, the table has three columns:
(1) Anintegercolumn calledTableIdindicating which table
in the results set the record applies to;
(2) Astringcolumn calledKeyindicating the kind of information
provided by the record (possible values:Visualization,ServerCache,
andCursor);
(3) Adynamiccolumn calledValueproviding the Key-determined information.TableIdKeyValue1ServerCache{"OriginalStartedOn":"2021-06-11T07:48:34.6201025Z",...}1Visualization{"Visualization":"piechart",...}
An@ExtendedPropertiestable that provides additional values, such as client visualization
instructions (information provided by therender operator),
information about the query's effectivedatabase cursor,
or information about the query's effective use of thequery results cache.
For queries sent using the v1 protocol, the table has a single column of typestring,
whose value is a JSON-encoded string, such as:
string
For queries sent using the v2 protocol, the table has three columns:
(1) Anintegercolumn calledTableIdindicating which table
in the results set the record applies to;
(2) Astringcolumn calledKeyindicating the kind of information
provided by the record (possible values:Visualization,ServerCache,
andCursor);
(3) Adynamiccolumn calledValueproviding the Key-determined information.
integer
TableId
string
Key
Visualization
ServerCache
Cursor
dynamic
Value
A QueryStatus table that provides additional information about the execution
of the query itself, such as, if it completed successfully or not,
and what were the resources consumed by the query.This table has the following structure:TimestampSeveritySeverityNameStatusCodeStatusDescriptionCountRequestIdActivityIdSubActivityIdClientActivityId2020-05-02 06:09:12.70520774Info0Query completed successfully1............Severity values of 2 or smaller indicate failure.
A QueryStatus table that provides additional information about the execution
of the query itself, such as, if it completed successfully or not,
and what were the resources consumed by the query.
This table has the following structure:
Severity values of 2 or smaller indicate failure.
A TableOfContents table, which is created last, and lists the other tables in the results.An example for this table is:OrdinalKindNameIdPrettyName0QueryResultPrimaryResultdb9520f9-0455-4cb5-b257-53068497605a1QueryProperties@ExtendedProperties908901f6-5319-4809-ae9e-009068c267c72QueryStatusQueryStatus00000000-0000-0000-0000-000000000000
A TableOfContents table, which is created last, and lists the other tables in the results.
An example for this table is:
Feedback
Was this page helpful?
Additional resources