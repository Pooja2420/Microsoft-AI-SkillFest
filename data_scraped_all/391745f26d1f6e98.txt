Note
Access to this page requires authorization. You can trysigning inorchanging directories.
Access to this page requires authorization. You can trychanging directories.
Alert processing rules
Article
2024-09-11
13 contributors
In this article

Note
Alert processing rules were previously known as 'action rules'. For backward compatibility, the Azure resource type of these rules is stillMicrosoft.AlertsManagement/actionRules.
Alert processing rules allow you to apply processing on fired alerts. Alert processing rules are different from alert rules. Alert rules generate new alerts that notify you when something happens, while alert processing rules modify the fired alerts as they're being fired to change the usual alert behavior.
You can use alert processing rules to addaction groupsor remove (suppress) action groups from your fired alerts. You can apply alert processing rules to different resource scopes, from a single resource, or to an entire subscription, as long as they are within the same subscription as the alert processing rule. You can also use them to apply various filters or have the rule work on a predefined schedule.
Some common use cases for alert processing rules are described here.
Suppress notifications during planned maintenance
Many customers set up a planned maintenance time for their resources, either on a one-time basis or on a regular schedule. The planned maintenance might cover a single resource, like a virtual machine, or multiple resources, like all virtual machines in a resource group. So, you might want to stop receiving alert notifications for those resources during the maintenance window. In other cases, you might prefer to not receive alert notifications outside of your business hours. Alert processing rules allow you to achieve that.
You could suppress alert notifications by disabling the alert rules themselves at the beginning of the maintenance window, and reenable them after the maintenance is over. In that case, the alerts won't fire in the first place. That approach has several limitations:
This approach is only practical if the scope of the alert rule is exactly the scope of the resources under maintenance. For example, a single alert rule might cover multiple resources, but only a few of those resources are going through maintenance. So, if you disable the alert rule, you won't be alerted when the remaining resources covered by that rule run into issues.You might have many alert rules that cover the resource. Updating all of them is time consuming and error prone.You might have some alerts that aren't created by an alert rule at all, like alerts from Azure Backup.
You might have many alert rules that cover the resource. Updating all of them is time consuming and error prone.
You might have some alerts that aren't created by an alert rule at all, like alerts from Azure Backup.
In all these cases, an alert processing rule provides an easy way to suppress notifications.
Management at scale
Most customers tend to define a few action groups that are used repeatedly in their alert rules. For example, they might want to call a specific action group whenever any high-severity alert is fired. As their number of alert rules grows, manually making sure that each alert rule has the right set of action groups is becoming harder.
Alert processing rules allow you to specify that logic in a single rule, instead of having to set it consistently in all your alert rules. They also cover alert types that aren't generated by an alert rule.
Add action groups to all alert types
Azure Monitor alert rules let you select which action groups will be triggered when their alerts are fired. However, not all Azure alert sources let you specify action groups. Some examples of such alerts includeAzure Backup alerts,VM Insights guest health alerts,Azure Stack Edge, andAzure Stack Hub.
For those alert types, you can use alert processing rules to add action groups.
Note
Alert processing rules don't affectAzure Service Healthalerts.
Scope and filters for alert processing rules

This section describes the scope and filters for alert processing rules.
Each alert processing rule has a scope. A scope is a list of one or more specific Azure resources, a specific resource group, or an entire subscription. The alert processing rule applies to alerts that fired on resources within that scope. You can't create an alert processing rule on a resource from a different subscription.
You can also define filters to narrow down which specific subset of alerts are affected within the scope. The available filters are described in the following table.
/subscriptions/SUB1/resourceGroups/RG1/providers/microsoft.insights/metricalerts/MY-API-LATENCY
resource type contains "MICROSOFT.SQL/SERVERS"
If you define multiple filters in a rule, all the rules apply. There's a logical AND between all filters.For example, if you set bothresource type = "Virtual Machines"andseverity = "Sev0", then the rule applies only forSev0alerts on virtual machines in the scope.
resource type = "Virtual Machines"
severity = "Sev0"
Sev0
Each filter can include up to five values. There's a logical OR between the values.For example, if your set description contains "this, that" (in the field there's no need to write the apostrophes), then the rule applies only to alerts whose description contains either "this" or "that".
Notice that you dont have any spaces (before, after or between) the string that is matched it effects the matching of the filter.
What should this rule do?
Choose one of the following actions:
Suppression: This action removes all the action groups from the affected fired alerts. So, the fired alerts won't invoke any of their action groups, not even at the end of the maintenance window. Those fired alerts will still be visible when you list your alerts in the portal, Azure Resource Graph, API, or PowerShell. The suppression action has a higher priority over theApply action groupsaction. If a single fired alert is affected by different alert processing rules of both types, the action groups of that alert will be suppressed.
Apply action groups: This action adds one or more action groups to the affected fired alerts.
When should this rule apply?
You can control when the rule applies. The rule is always active, by default. You can select a one-time window for this rule to apply, or you can have a recurring window, such as a weekly recurrence.
Configure an alert processing rule
Portal
Azure CLI
PowerShell
You can access alert processing rules by going to theAlertshome page in Azure Monitor. Then you can selectAlert processing rulesto see and manage your existing rules. You can also selectCreate>Alert processing rulesto open the new alert processing rule wizard.

Let's review the new alert processing rule wizard.
On theScopetab, you select which fired alerts are covered by this rule. Pick thescopeof resources whose alerts will be covered. You can choose multiple resources and resource groups, or an entire subscription. You can  also optionally add filters, as previously described.
On theScopetab, you select which fired alerts are covered by this rule. Pick thescopeof resources whose alerts will be covered. You can choose multiple resources and resource groups, or an entire subscription. You can  also optionally add filters, as previously described.

On theRule settingstab, you select which action to apply on the affected alerts. Choose betweenSuppress notificationsorApply action group. If you chooseApply action group, you can select existing action groups by selectingAdd action groups. You can also create a new action group.
On theRule settingstab, you select which action to apply on the affected alerts. Choose betweenSuppress notificationsorApply action group. If you chooseApply action group, you can select existing action groups by selectingAdd action groups. You can also create a new action group.

On theSchedulingtab, you select an optional schedule for the rule. By default, the rule works all the time, unless you disable it. You can set it to workOn a specific time, or you can set up aRecurringschedule.Let's see an example of a schedule for a one-time, overnight, planned maintenance. It starts in the evening and continues until the next morning, in a specific time zone.An example of a more complex schedule covers an "outside of business hours" case. It has a recurring schedule with two recurrences. One recurrence is daily from the afternoon until the morning. The other recurrence is weekly and covers full days for Saturday and Sunday.
On theSchedulingtab, you select an optional schedule for the rule. By default, the rule works all the time, unless you disable it. You can set it to workOn a specific time, or you can set up aRecurringschedule.
Let's see an example of a schedule for a one-time, overnight, planned maintenance. It starts in the evening and continues until the next morning, in a specific time zone.

An example of a more complex schedule covers an "outside of business hours" case. It has a recurring schedule with two recurrences. One recurrence is daily from the afternoon until the morning. The other recurrence is weekly and covers full days for Saturday and Sunday.

On theDetailstab, you give this rule a name, pick where it is stored, and optionally add a description for your reference.
On theDetailstab, you give this rule a name, pick where it is stored, and optionally add a description for your reference.
On theTagstab, you can optionally add tags to the rule.
On theTagstab, you can optionally add tags to the rule.
On theReview + createtab, you can review and create the alert processing rule.
On theReview + createtab, you can review and create the alert processing rule.
You can use the Azure CLI to work with alert processing rules. For detailed documentation and examples, see theaz monitor alert-processing-rulespage in the Azure CLI docs.
az monitor alert-processing-rules
Prepare your environment
Install the Azure CLI.Follow theinstallation instructions for the Azure CLI.Alternatively, you can use Azure Cloud Shell, which is an interactive shell environment that you use through your browser. To start:OpenAzure Cloud Shell.Select theCloud Shellbutton on the menu bar in the upper-right corner in theAzure portal.
Install the Azure CLI.
Follow theinstallation instructions for the Azure CLI.
Alternatively, you can use Azure Cloud Shell, which is an interactive shell environment that you use through your browser. To start:
OpenAzure Cloud Shell.
Select theCloud Shellbutton on the menu bar in the upper-right corner in theAzure portal.
Sign in.If you're using a local installation of the CLI, sign in by using theaz logincommand. Follow the steps displayed in your terminal to complete the authentication process.az login
Sign in.
If you're using a local installation of the CLI, sign in by using theaz logincommand. Follow the steps displayed in your terminal to complete the authentication process.
az login
az login
az login
Install thealertsmanagementextension.To use theaz monitor alert-processing-rulecommands, install thealertsmanagementpreview extension.az extension add --name alertsmanagementThe following output is expected.The installed extension 'alertsmanagement' is in preview.To learn more about Azure CLI extensions, seeUse extensions with the Azure CLI.
Install thealertsmanagementextension.
alertsmanagement
To use theaz monitor alert-processing-rulecommands, install thealertsmanagementpreview extension.
az monitor alert-processing-rule
alertsmanagement
az extension add --name alertsmanagement
az extension add --name alertsmanagement
The following output is expected.
The installed extension 'alertsmanagement' is in preview.
The installed extension 'alertsmanagement' is in preview.
To learn more about Azure CLI extensions, seeUse extensions with the Azure CLI.
Create an alert processing rule with the Azure CLI
Use theaz monitor alert-processing-rule createcommand to create alert processing rules.For example, to create a rule that adds an action group to all alerts in a subscription, run:
az monitor alert-processing-rule create
az monitor alert-processing-rule create \
  --name 'AddActionGroupToSubscription' \
  --rule-type AddActionGroups \
  --scopes "/subscriptions/SUB1" \
  --action-groups "/subscriptions/SUB1/resourcegroups/RG1/providers/microsoft.insights/actiongroups/AG1" \
  --resource-group RG1 \
  --description "Add action group AG1 to all alerts in the subscription"
az monitor alert-processing-rule create \
  --name 'AddActionGroupToSubscription' \
  --rule-type AddActionGroups \
  --scopes "/subscriptions/SUB1" \
  --action-groups "/subscriptions/SUB1/resourcegroups/RG1/providers/microsoft.insights/actiongroups/AG1" \
  --resource-group RG1 \
  --description "Add action group AG1 to all alerts in the subscription"
TheCLI documentationincludes more examples and an explanation of each parameter.
You can use PowerShell to work with alert processing rules. For detailed documentation and examples, see the*-AzAlertProcessingRulecommandsin the PowerShell docs.
*-AzAlertProcessingRule
Create an alert processing rule using PowerShell
Use theSet-AzAlertProcessingRulecommand to create alert processing rules. For example, to create a rule that adds an action group to all alerts in a subscription, run:
Set-AzAlertProcessingRule
Set-AzAlertProcessingRule `
  -Name AddActionGroupToSubscription `
  -AlertProcessingRuleType AddActionGroups `
  -Scope /subscriptions/SUB1 `
  -ActionGroupId /subscriptions/SUB1/resourcegroups/RG1/providers/microsoft.insights/actiongroups/AG1 `
  -ResourceGroupName RG1 `
  -Description "Add action group AG1 to all alerts in the subscription"
Set-AzAlertProcessingRule `
  -Name AddActionGroupToSubscription `
  -AlertProcessingRuleType AddActionGroups `
  -Scope /subscriptions/SUB1 `
  -ActionGroupId /subscriptions/SUB1/resourcegroups/RG1/providers/microsoft.insights/actiongroups/AG1 `
  -ResourceGroupName RG1 `
  -Description "Add action group AG1 to all alerts in the subscription"
ThePowerShell documentationincludes more examples and an explanation of each parameter.
Manage alert processing rules
Portal
Azure CLI
PowerShell
You can view and manage your alert processing rules from the list view:

From here, you can enable, disable, or delete alert processing rules at scale by selecting the checkboxes next to them. Selecting an alert processing rule opens it for editing. You can enable or disable the rule on theDetailstab.
You can view and manage your alert processing rules by using theaz monitor alert-processing-rulescommands from Azure CLI.
Before you manage alert processing rules with the Azure CLI, prepare your environment by using the instructions provided inConfigure an alert processing rule.
# List all alert processing rules for a subscription
az monitor alert-processing-rule list

# Get details of an alert processing rule
az monitor alert-processing-rule show --resource-group RG1 --name MyRule

# Update an alert processing rule
az monitor alert-processing-rule update --resource-group RG1 --name MyRule --enabled true

# Delete an alert processing rule
az monitor alert-processing-rules delete --resource-group RG1 --name MyRule
# List all alert processing rules for a subscription
az monitor alert-processing-rule list

# Get details of an alert processing rule
az monitor alert-processing-rule show --resource-group RG1 --name MyRule

# Update an alert processing rule
az monitor alert-processing-rule update --resource-group RG1 --name MyRule --enabled true

# Delete an alert processing rule
az monitor alert-processing-rules delete --resource-group RG1 --name MyRule
You can view and manage your alert processing rules by using the*-AzAlertProcessingRulecommands from the Azure CLI.
Before you manage alert processing rules with the Azure CLI, prepare your environment by following the instructions inConfigure an alert processing rule.
# List all alert processing rules for a subscription
Get-AzAlertProcessingRule

# Get details of an alert processing rule
Get-AzAlertProcessingRule -ResourceGroupName RG1 -Name MyRule | Format-List

# Update an alert processing rule
Update-AzAlertProcessingRule -ResourceGroupName RG1 -Name MyRule -Enabled False

# Delete an alert processing rule
Remove-AzAlertProcessingRule -ResourceGroupName RG1 -Name MyRule
# List all alert processing rules for a subscription
Get-AzAlertProcessingRule

# Get details of an alert processing rule
Get-AzAlertProcessingRule -ResourceGroupName RG1 -Name MyRule | Format-List

# Update an alert processing rule
Update-AzAlertProcessingRule -ResourceGroupName RG1 -Name MyRule -Enabled False

# Delete an alert processing rule
Remove-AzAlertProcessingRule -ResourceGroupName RG1 -Name MyRule
Next steps
Learn more about alerts in Azure
Feedback
Was this page helpful?
Additional resources