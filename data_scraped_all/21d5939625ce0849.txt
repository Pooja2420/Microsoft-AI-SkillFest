Note
Access to this page requires authorization. You can trysigning inorchanging directories.
Access to this page requires authorization. You can trychanging directories.
Data Model for resource specific Diagnostic Events
Article
2024-12-30
12 contributors
In this article
Note
For creating custom reporting views, it is recommended to usesystem functions on Azure Monitor logsinstead of working with the raw tables listed below.
Differences in schema for Recovery Services vaults and Backup vaults
Recovery Services vaults and Backup vaults send data to a common set of tables that are listed in this article. However, there are slight differences in the schema for Recovery Services vaults and Backup vaults.
One of the main reasons for this difference is that for Backup vaults, Azure Backup service does a 'flattening' of schemas to reduce the number of joins needed in queries, hence improving query performance. For example, if you are looking to write a query that lists all Backup vault jobs along with the friendly name of the datasource, and friendly name of the vault, you can get all of this information for the AddonAzureBackupJobs table (without needing to do a join with CoreAzureBackup to get the datasource and vault names). Flattened schemas are currently supported only for Backup vaults and not yet for Recovery Services vaults.
Apart from the above, there are also certain scenarios that are currently applicable for Recovery Services vaults only (for example, fields related to DPM workloads). This also leads to some differences in the schema between Backup vaults and Recovery Services vaults.
To understand which fields are specific to a particular vault type, and which fields are common across vault types, refer to theApplicable Resource Typescolumn provided in the below sections. For more information on how to write queries on these tables for Recovery Services vaults and Backup vaults, see thesample queries.
CoreAzureBackup
This table provides information about core backup entities, such as vaults and backup items.
AddonAzureBackupAlerts
This table provides details about alert related fields.
Note
AddonAzureBackupAlerts refers to the alerts being generated by the classic alerts solution. As classic alerts solution is on deprecation path in favour of Azure Monitor based alerts, we recommend you not to select this event AddonAzureBackupAlerts when configuring diagnostics settings. To send the fired Azure Monitor based alerts to a destination of your choice, you can create an alert processing rule and action group that routes these alerts to a logic app, webhook, or runbook that in turn sends these alerts to the required destination.
AddonAzureBackupProtectedInstance
This table provides basic protected instances-related fields.
AddonAzureBackupJobs
This table provides details about job-related fields.
AddonAzureBackupPolicy
This table provides details about policy-related fields.
AddonAzureBackupStorage
This table provides details about storage-related fields.
AzureBackupOperations
This table lists operations such as adhoc backup/restore of on-premises machine, modification of backup policy, stopping protection with retain/delete data, and changing passphrase in on-premises scenario where audit logs are not available when being performed from the on-premises agent.
Valid Operation Names for each table
Each record in the above tables has an associatedOperation Name. An Operation Name describes the type of record (and also indicates which fields in the table are populated for that record). Each table (category) supports one or more distinct Operation Names. Below is a summary of the supported Operation Names for each of the above tables.
Choose a vault type:
Recovery Services vaults
Backup vaults
Often, you will need to perform joins between different tables as well as different sets of records that are part of the same table (differentiated by Operation Name) to get all the fields required for your analysis. Refer to thesample queriesto get started.
Next steps
Learn how to send diagnostics data to Log Analytics
Learn how to write queries on Resource specific tables
Feedback
Was this page helpful?
Additional resources