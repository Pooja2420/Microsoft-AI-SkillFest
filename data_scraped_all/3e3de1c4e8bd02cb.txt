Build the first layer of defense with Azure Security services
Solution ideas
This article describes a solution idea. Your cloud architect can use this guidance to help visualize the major components for a typical implementation of this architecture. Use this article as a starting point to design a well-architected solution that aligns with your workload's specific requirements.
You can use a various Azure services to create a complete IT infrastructure for your organization. Azure also provides security services that can help you protect your infrastructure. By using Azure security solutions, you can enhance your IT environment's security posture, mitigate vulnerabilities, and protect against breaches via a well-architected solution that's based on Microsoft best practices.
Although some security services incur associated costs, many are available at no additional charge. Free services include network security groups (NSGs), storage encryption, TLS/SSL, shared access signature tokens, and more. This article focuses on these cost-free services.
This article is the third in a series of five. To review the previous two articles in this series, including the introduction and a review of how you can map threats against an IT environment, see the following article:
Map threats to your IT environment
Potential use cases
This article organizes Azure security services by Azure resource so you can focus on specific threats that target resources like virtual machines (VMs), operating systems, Azure networks, or applications, in addition to attacks that can compromise users and passwords. The following diagram can help you identify the Azure security services that help protect resources and user identities against these types of threats.
Architecture

Download aVisio fileof this architecture.
Â©2021 The MITRE Corporation. This work is reproduced and distributed with the permission of The MITRE Corporation.
The Azure security layer in this diagram is based on Azure Security Benchmark (ASB) v3, which is a set of security rules that are implemented through Azure policies. ASB is based on a combination of rules fromCIS Center for Internet SecurityandNational Institute of Standards and Technology. For more information about ASB, seeOverview of the Azure Security Benchmark v3.
The diagram doesn't include every Azure security service available, but it does highlight the services that are used most commonly. All the security services shown in the architectural diagram can be combined and configured to work together with your IT environment and your organization's specific security needs.
Workflow
This section describes the components and services that appear in the diagram. Many of those are labeled with their ASB control codes, in addition to their abbreviated labels. The control codes correspond to the control domains that are listed inControls.
Azure Security BenchmarkEach security control refers to one or more specific Azure security services. The architecture reference in this article shows some of them and their control numbers according to the ASB documentation. The controls include:Network securityIdentity managementPrivileged accessData protectionAsset managementLogging and threat detectionIncident responsePosture and vulnerability managementEndpoint securityBackup and recoveryDevOps securityGovernance and strategyFor more information about security controls, seeOverview of the Azure Security Benchmark (v3).
Azure Security Benchmark
Each security control refers to one or more specific Azure security services. The architecture reference in this article shows some of them and their control numbers according to the ASB documentation. The controls include:
Network security
Identity management
Privileged access
Data protection
Asset management
Logging and threat detection
Incident response
Posture and vulnerability management
Endpoint security
Backup and recovery
DevOps security
Governance and strategy
For more information about security controls, seeOverview of the Azure Security Benchmark (v3).
NetworkThe following table describes the network services in the diagram.LabelDescriptionDocumentationNSGA free service that you attach to a network interface or subnet. An NSG allows you to filter TCP or UDP protocol traffic by using IP address ranges and ports for inbound and outbound connections.Network security groupsVPNA virtual private network (VPN) gateway that delivers a tunnel with IPSEC (IKE v1/v2) protection.VPN GatewayAzure FirewallA platform as a service (PaaS) that delivers protection in layer 4 and is attached to an entire virtual network.What is Azure Firewall?App GW + WAFAzure Application Gateway with Web Application Firewall (WAF). Application Gateway is a load balancer for web traffic that works in layer 7 and adds WAF to protect applications that use HTTP and HTTPS.What is Azure Application Gateway?NVANetwork virtual appliance (NVA). A virtual security service from the marketplace that's provisioned on VMs on Azure.Network virtual appliancesDDOSDDoS protection implemented on the virtual network to help you mitigate different types of DDoS attacks.Azure DDoS Network Protection overviewTLS/SSLTLS/SSL deliver encryption in transit for most Azure services that exchange information, such as Azure Storage and Web Apps.Configure end-to-end TLS by using Application Gateway with PowerShellPrivate LinkService that allows you to create a private network for an Azure service that initially is exposed to the internet.What is Azure Private Link?Private endpointCreates a network interface and attaches it to the Azure service. Private Endpoint is part of Private Link. This configuration lets the service, by using a private endpoint, be part of your virtual network.What is a private endpoint?
Network
The following table describes the network services in the diagram.
Infrastructure and endpointsThe following table describes infrastructure and endpoint services that are shown in the diagram.LabelDescriptionDocumentationBastionBastion provides jump server functionality. This service allows you to access your VMs through remote desktop protocol (RDP) or SSH without exposing your VMs to the internet.What is Azure Bastion?AntimalwareMicrosoft Defender provides antimalware service and is part of Windows 10, Windows 11, Windows Server 2016, and Windows Server 2019.Microsoft Defender Antivirus in WindowsDisk encryptDisk Encryption allows you to encrypt the disk of a VM.Azure Disk Encryption for Windows VMsKeyvaultKey Vault, a service to store keys, secrets, and certificates with FIPS 140-2 Level 2 or 3.Azure Key Vault basic conceptsRDP ShortAzure Virtual Desktop RDP Shortpath. This feature allows remote users to connect to the Virtual Desktop service from a private network.Azure Virtual Desktop RDP Shortpath for managed networksReverse connectA built-in security feature from Azure Virtual Desktop. Reverse connect guarantees that remote users receive only pixel streams and don't reach the host VMs.Understanding Azure Virtual Desktop network connectivity
Infrastructure and endpoints
The following table describes infrastructure and endpoint services that are shown in the diagram.
Application and dataThe following table describes application and data services that are shown in the diagram.LabelDescriptionDocumentationFrontdoor + WAFA content delivery network (CDN). Front Door combines multiple points of presence to deliver a better connection for users who access the service and adds WAF.What is Azure Front Door?API ManagementA service that delivers security for API calls and manages APIs across environments.About API ManagementPenTestA set of best practices to execute a penetration test in your environment, including Azure resources.Penetration testingStorage SAS tokenA shared access token to allow others to access your Azure storage account.Grant limited access to Azure Storage resources using shared access signatures (SAS)Private endpointCreate a network interface and attach it to your storage account to configure it inside a private network on Azure.Use private endpoints for Azure StorageStorage firewallFirewall that allows you to set a range of IP addresses that can access your storage account.Configure Azure Storage firewalls and virtual networksEncryption(Azure Storage)Protects your storage account with encryption at rest.Azure Storage encryption for data at restSQL auditTracks database events and writes them to an audit log in your Azure storage account.Auditing for Azure SQL Database and Azure Synapse AnalyticsVulnerability assessmentService that helps you discover, track, and remediate potential database vulnerabilities.SQL vulnerability assessment helps you identify database vulnerabilitiesEncryption(Azure SQL)Transparent data encryption (TDE) helps protect Azure SQL database services by encrypting data at rest.Transparent data encryption for SQL Database, SQL Managed Instance, and Azure Synapse Analytics
Application and data
The following table describes application and data services that are shown in the diagram.
IdentityThe following table describes identity services that are shown in the diagram.LabelDescriptionDocumentationRBACAzure role-based access control (Azure RBAC) helps you manage access to Azure services by using granular permissions that are based on users' Microsoft Entra credentials.What is Azure role-based access control (Azure RBAC)?MFAMultifactor authentication offers additional types of authentication beyond user names and passwords.How it works: Microsoft Entra multifactor authenticationID protectionIdentity Protection, a security service from Microsoft Entra ID, analyzes trillions of signals per day to identify and protect users from threats.What is Identity Protection?PIMPrivileged Identity Management (PIM), a security service from Microsoft Entra ID. It helps you to provide superuser privileges temporarily for Microsoft Entra ID (for example, User Administrator) and Azure subscriptions (for example, Role Based Access Control Administrator or Key Vault Administrator).What is Microsoft Entra Privileged Identity Management?Cond AccConditional Access is an intelligent security service that uses policies that you define for various conditions to block or grant access to users.What is Conditional Access?
Identity
The following table describes identity services that are shown in the diagram.
Components
The example architecture in this article uses the following Azure components:
Microsoft Entra IDis a cloud-based identity and access management service. Microsoft Entra ID helps your users to access external resources, such as Microsoft 365, the Azure portal, and thousands of other SaaS applications. It also helps them access internal resources, like apps on your corporate intranet network.
Microsoft Entra IDis a cloud-based identity and access management service. Microsoft Entra ID helps your users to access external resources, such as Microsoft 365, the Azure portal, and thousands of other SaaS applications. It also helps them access internal resources, like apps on your corporate intranet network.
Azure Virtual Networkis the fundamental building block for your private network in Azure. Virtual Network enables many types of Azure resources to securely communicate with each other, the internet, and on-premises networks. Virtual Network provides a virtual network that benefits from Azure's infrastructure, such as scale, availability, and isolation.
Azure Virtual Networkis the fundamental building block for your private network in Azure. Virtual Network enables many types of Azure resources to securely communicate with each other, the internet, and on-premises networks. Virtual Network provides a virtual network that benefits from Azure's infrastructure, such as scale, availability, and isolation.
Azure Load Balanceris a high-performance, low-latency Layer 4 load-balancing service (inbound and outbound) for all UDP and TCP protocols. It's built to handle millions of requests per second while ensuring that your solution is highly available. Azure Load Balancer is zone-redundant, ensuring high availability across Availability Zones.
Azure Load Balanceris a high-performance, low-latency Layer 4 load-balancing service (inbound and outbound) for all UDP and TCP protocols. It's built to handle millions of requests per second while ensuring that your solution is highly available. Azure Load Balancer is zone-redundant, ensuring high availability across Availability Zones.
Virtual machinesare one of several types of on-demand, scalable computing resources that Azure offers. An Azure virtual machine (VM) gives you the flexibility of virtualization without having to buy and maintain the physical hardware that runs it.
Virtual machinesare one of several types of on-demand, scalable computing resources that Azure offers. An Azure virtual machine (VM) gives you the flexibility of virtualization without having to buy and maintain the physical hardware that runs it.
Azure Kubernetes service (AKS)is a fully managed Kubernetes service for deploying and managing containerized applications. AKS provides serverless Kubernetes, continuous integration/continuous delivery (CI/CD), and enterprise-grade security and governance.
Azure Kubernetes service (AKS)is a fully managed Kubernetes service for deploying and managing containerized applications. AKS provides serverless Kubernetes, continuous integration/continuous delivery (CI/CD), and enterprise-grade security and governance.
Azure Virtual Desktopis a desktop and app virtualization service that runs on the cloud to provide desktops for remote users.
Azure Virtual Desktopis a desktop and app virtualization service that runs on the cloud to provide desktops for remote users.
App Service Web Appsis an HTTP-based service for hosting web applications, REST APIs, and mobile back ends. You can develop in your favorite language, and applications run and scale with ease on both Windows and Linux-based environments.
App Service Web Appsis an HTTP-based service for hosting web applications, REST APIs, and mobile back ends. You can develop in your favorite language, and applications run and scale with ease on both Windows and Linux-based environments.
Azure Storageis highly available, massively scalable, durable, and secure storage for various data objects in the cloud, including object, blob, file, disk, queue, and table storage. All data written to an Azure storage account is encrypted by the service. Azure Storage provides you with fine-grained control over who has access to your data.
Azure Storageis highly available, massively scalable, durable, and secure storage for various data objects in the cloud, including object, blob, file, disk, queue, and table storage. All data written to an Azure storage account is encrypted by the service. Azure Storage provides you with fine-grained control over who has access to your data.
Azure SQL databaseis a fully managed PaaS database engine that handles most of the database management functions such as upgrading, patching, backups, and monitoring. It provides these functions without user involvement. SQL Database provides a range of built-in security and compliance features to help your application meet security and compliance requirements.
Azure SQL databaseis a fully managed PaaS database engine that handles most of the database management functions such as upgrading, patching, backups, and monitoring. It provides these functions without user involvement. SQL Database provides a range of built-in security and compliance features to help your application meet security and compliance requirements.
Contributors
This article is maintained by Microsoft. It was originally written by the following contributors.
Principal author:
Rudnei Oliveira| Senior Azure Security Engineer
Other contributors:
Gary Moore| Programmer/Writer
Andrew Nathan| Senior Customer Engineering Manager
Next steps
Microsoft has more documentation that can help you secure your IT environment, and the following articles can be particularly helpful:
Security in the Microsoft Cloud Adoption Framework for Azure. The Cloud Adoption Framework provides security guidance for your cloud journey by clarifying the processes, best practices, models, and experience.
Microsoft Azure Well-Architected Framework. The Azure Well-Architected Framework is a set of guiding tenets that you can use to improve the quality of a workload. The framework is based on five pillars: reliability, security, cost optimization, operational excellence, and performance efficiency.
Microsoft Security Best Practices. Microsoft Security Best Practices (formerly known as theAzure Security CompassorMicrosoft Security Compass) is a collection of best practices that provide clear, actionable guidance for security-related decisions.
Microsoft Cybersecurity Reference Architectures (MCRA). MCRA is a compilation of various Microsoft security reference architectures.
In the following resources, you can find more information about the services, technologies, and terminologies that are mentioned in this article:
What are public, private, and hybrid clouds?
Overview of the Azure Security Benchmark (v3)
Embrace proactive security with Zero Trust
Microsoft 365subscription information
Microsoft Defender XDR
Related resources
For more details about this reference architecture, see the other articles in this series:
Part 1:Map threats to your IT environment
Part 3:Build the second layer of defense with Microsoft Defender XDR Security services
Part 4:Integration between Azure and Microsoft Defender XDR security services