Note
Access to this page requires authorization. You can trysigning inorchanging directories.
Access to this page requires authorization. You can trychanging directories.
Deploy S/4HANA infrastructure with Azure Center for SAP solutions
Article
2024-01-29
8 contributors
In this article
In this how-to guide, you'll learn how to deploy S/4HANA infrastructure inAzure Center for SAP solutions. There arethree deployment options: distributed with High Availability (HA), distributed non-HA, and single server.
Prerequisites
An Azuresubscription
RegistertheMicrosoft.WorkloadsResource Provider on the subscription in which you are deploying the SAP system.
An Azure account withContributorroleaccess to the subscriptions and resource groups in which you'll create the Virtual Instance for SAP solutions (VIS) resource.
AUser-assigned managedidentitywhich has Contributor role access on the Subscription or at least all resource groups (Compute, Network,Storage). If you wish to install SAP Software through the Azure Center for SAP solutions, also provide Storage Blob data Reader, Reader and Data Access roles to the identity on SAP bits storage account where you would store the SAP Media.
Anetwork set up for your infrastructure deployment.
Availability of minimum 4 cores of either Standard_D4ds_v4 or Standard_E4s_v3 SKUS which will be used during Infrastructure deployment and Software Installation
Review the quotas for your Azure subscription. If the quotas are low, you might need to create a support request before creating your infrastructure deployment. Otherwise, you might experience deployment failures or anInsufficient quotaerror.
Note the SAP Application Performance Standard (SAPS) and database memory size that you need to allow Azure Center for SAP solutions to size your SAP system. If you're not sure, you can also select the VMs. There are:A single or cluster of ASCS VMs, which make up a single ASCS instance in the VIS.A single or cluster of Database VMs, which make up a single Database instance in the VIS.A single Application Server VM, which makes up a single Application instance in the VIS. Depending on the number of Application Servers being deployed or registered, there can be multiple application instances.
A single or cluster of ASCS VMs, which make up a single ASCS instance in the VIS.
A single or cluster of Database VMs, which make up a single Database instance in the VIS.
A single Application Server VM, which makes up a single Application instance in the VIS. Depending on the number of Application Servers being deployed or registered, there can be multiple application instances.
Deployment types
There are three deployment options that you can select for your infrastructure, depending on your use case.
Distributed with High Availability (HA)creates distributed HA architecture. This option is recommended for production environments. If you choose this option, you need to select aHigh Availability SLA. Select the appropriate SLA for your use case:99.99% (Optimize for availability)shows available zone pairs for VM deployment. The first zone is primary and the next is secondary. Active ASCS and Database servers are deployed in the primary zone. Passive ASCS and Database servers are deployed in the secondary zone. Application servers are deployed evenly across both zones. This option isn't shown in regions without availability zones, or without at least one M-series and E-series VM SKU available in the zonal pairs within that region.99.95% (Optimize for cost)shows three availability sets for all instances. The HA ASCS cluster is deployed in the first availability set. All Application servers are deployed across the second availability set. The HA Database server is deployed in the third availability set. No availability zone names are shown.
99.99% (Optimize for availability)shows available zone pairs for VM deployment. The first zone is primary and the next is secondary. Active ASCS and Database servers are deployed in the primary zone. Passive ASCS and Database servers are deployed in the secondary zone. Application servers are deployed evenly across both zones. This option isn't shown in regions without availability zones, or without at least one M-series and E-series VM SKU available in the zonal pairs within that region.
99.95% (Optimize for cost)shows three availability sets for all instances. The HA ASCS cluster is deployed in the first availability set. All Application servers are deployed across the second availability set. The HA Database server is deployed in the third availability set. No availability zone names are shown.
Distributedcreates distributed non-HA architecture.
Single Servercreates architecture with a single server. This option is available for non-production environments only.
Supported software
Azure Center for SAP solutions supports the following SAP software versions: S/4HANA 1909 ISS 00, S/4HANA 2020 ISS 00, S/4HANA 2021 ISS 00 and S/4HANA 2022 ISS 00.
The following operating system (OS) software versions are compatible with these SAP software versions:
You can uselatestif you want to use the latest image and not a specific older version. If thelatestimage version is newly released in marketplace and has an unforeseen issue, the deployment might fail. If you are using Portal for deployment, we recommend choosing a different imagesku train(e.g. 12-SP4 instead of 15-SP3) till the issues are resolved. However, if deploying via API/CLI, you can provide any otherimage versionwhich is available. To view and select the available image versions from a publisher, use below commandsGet-AzVMImage -Location $locName -PublisherName $pubName -Offer $offerName -Sku $skuName | Select Version

where, for example
$locName="eastus"
$pubName="RedHat"
$offerName="RHEL-SAP-HA"
$skuName="84sapha-gen2"
You can uselatestif you want to use the latest image and not a specific older version. If thelatestimage version is newly released in marketplace and has an unforeseen issue, the deployment might fail. If you are using Portal for deployment, we recommend choosing a different imagesku train(e.g. 12-SP4 instead of 15-SP3) till the issues are resolved. However, if deploying via API/CLI, you can provide any otherimage versionwhich is available. To view and select the available image versions from a publisher, use below commands
latest
Get-AzVMImage -Location $locName -PublisherName $pubName -Offer $offerName -Sku $skuName | Select Version

where, for example
$locName="eastus"
$pubName="RedHat"
$offerName="RHEL-SAP-HA"
$skuName="84sapha-gen2"
Get-AzVMImage -Location $locName -PublisherName $pubName -Offer $offerName -Sku $skuName | Select Version

where, for example
$locName="eastus"
$pubName="RedHat"
$offerName="RHEL-SAP-HA"
$skuName="84sapha-gen2"
Azure Center for SAP solutions now supports deployment of SAP system VMs with custom OS images along with the Azure Marketplace images. For deployment using custom OS images, follow the stepshere.
Azure Center for SAP solutions now supports deployment of SAP system VMs with custom OS images along with the Azure Marketplace images. For deployment using custom OS images, follow the stepshere.
Create deployment
Sign in to theAzure portal.
Sign in to theAzure portal.
In the search bar, enter and selectAzure Center for SAP solutions.
In the search bar, enter and selectAzure Center for SAP solutions.
On the Azure Center for SAP solutions landing page, selectCreate a new SAP system.
On the Azure Center for SAP solutions landing page, selectCreate a new SAP system.
On theCreate Virtual Instance for SAP solutionspage, on theBasicstab, fill in the details for your project.ForSubscription, select the Azure subscription into which you're deploying the infrastructure.ForResource group, select the resource group for all resources that the VIS creates.
On theCreate Virtual Instance for SAP solutionspage, on theBasicstab, fill in the details for your project.
ForSubscription, select the Azure subscription into which you're deploying the infrastructure.
ForSubscription, select the Azure subscription into which you're deploying the infrastructure.
ForResource group, select the resource group for all resources that the VIS creates.
ForResource group, select the resource group for all resources that the VIS creates.
UnderInstance details, enter the details for your SAP instance.ForNameenter the three-character SAP system identifier (SID). The VIS uses the same name as the SID.ForRegion, select the Azure region into which you're deploying the resources.ForEnvironment type, select whether your environment is production or non-production. If you selectProduction, you can deploy a distributed HA or non-HA S/4HANA system. It's recommended to use distributed HA deployments for production systems. If you selectNon-production, you can use a single-server deployment.ForSAP product, keep the selection asS/4HANA.ForDatabase, keep the selection asHANA.ForHANA scale method, keep the selection asScale up.ForDeployment type,select and configure your deployment type.ForNetwork, create thenetwork you created previously with subnets.ForApplication subnetandDatabase subnet, map the IP address ranges as required. It's recommended to use a different subnet for each deployment. The names including AzureFirewallSubnet, AzureFirewallManagementSubnet, AzureBastionSubnet and GatewaySubnet are reserved names within Azure. Please do not use these as the subnet names.
UnderInstance details, enter the details for your SAP instance.
ForNameenter the three-character SAP system identifier (SID). The VIS uses the same name as the SID.
ForNameenter the three-character SAP system identifier (SID). The VIS uses the same name as the SID.
ForRegion, select the Azure region into which you're deploying the resources.
ForRegion, select the Azure region into which you're deploying the resources.
ForEnvironment type, select whether your environment is production or non-production. If you selectProduction, you can deploy a distributed HA or non-HA S/4HANA system. It's recommended to use distributed HA deployments for production systems. If you selectNon-production, you can use a single-server deployment.
ForEnvironment type, select whether your environment is production or non-production. If you selectProduction, you can deploy a distributed HA or non-HA S/4HANA system. It's recommended to use distributed HA deployments for production systems. If you selectNon-production, you can use a single-server deployment.
ForSAP product, keep the selection asS/4HANA.
ForSAP product, keep the selection asS/4HANA.
ForDatabase, keep the selection asHANA.
ForDatabase, keep the selection asHANA.
ForHANA scale method, keep the selection asScale up.
ForHANA scale method, keep the selection asScale up.
ForDeployment type,select and configure your deployment type.
ForDeployment type,select and configure your deployment type.
ForNetwork, create thenetwork you created previously with subnets.
ForNetwork, create thenetwork you created previously with subnets.
ForApplication subnetandDatabase subnet, map the IP address ranges as required. It's recommended to use a different subnet for each deployment. The names including AzureFirewallSubnet, AzureFirewallManagementSubnet, AzureBastionSubnet and GatewaySubnet are reserved names within Azure. Please do not use these as the subnet names.
ForApplication subnetandDatabase subnet, map the IP address ranges as required. It's recommended to use a different subnet for each deployment. The names including AzureFirewallSubnet, AzureFirewallManagementSubnet, AzureBastionSubnet and GatewaySubnet are reserved names within Azure. Please do not use these as the subnet names.
UnderOperating systems, select the source of the image.
UnderOperating systems, select the source of the image.
If you're using Azure Marketplace OS images, use these settings:ForApplication OS image, select the OS image for the application server.ForDatabase OS image, select the OS image for the database server.If you're usingcustom OS images, use these settings:ForApplication OS image, select the image version from the Azure Compute Gallery.ForDatabase OS image, select the image version from the Azure Compute Gallery.
If you're using Azure Marketplace OS images, use these settings:
ForApplication OS image, select the OS image for the application server.
ForApplication OS image, select the OS image for the application server.
ForDatabase OS image, select the OS image for the database server.
ForDatabase OS image, select the OS image for the database server.
If you're usingcustom OS images, use these settings:ForApplication OS image, select the image version from the Azure Compute Gallery.ForDatabase OS image, select the image version from the Azure Compute Gallery.
If you're usingcustom OS images, use these settings:
ForApplication OS image, select the image version from the Azure Compute Gallery.
ForApplication OS image, select the image version from the Azure Compute Gallery.
ForDatabase OS image, select the image version from the Azure Compute Gallery.
ForDatabase OS image, select the image version from the Azure Compute Gallery.
UnderAdministrator account, enter your administrator account details.ForAuthentication type, keep the setting asSSH public.ForUsername, enter an SAP administrator username.ForSSH public key source, select a source for the public key. You can choose to generate a new key pair, use an existing key stored in Azure, or use an existing public key stored on your local computer. If you don't have keys already saved, it's recommended to generate a new key pair.ForKey pair name, enter a name for the key pair.If you choose to use anExisting public key stored in azure, select the key inStored KeysinputProvide the corresponding SSH private key fromlocal filestored on your computer orcopy pastethe private key.If you choose to use anExisting public key, you can either Provide the SSH public key fromlocal filestored on your computer orcopy pastethe public key.Provide the corresponding SSH private key fromlocal filestored on your computer orcopy pastethe private key.
UnderAdministrator account, enter your administrator account details.
ForAuthentication type, keep the setting asSSH public.
ForAuthentication type, keep the setting asSSH public.
ForUsername, enter an SAP administrator username.
ForUsername, enter an SAP administrator username.
ForSSH public key source, select a source for the public key. You can choose to generate a new key pair, use an existing key stored in Azure, or use an existing public key stored on your local computer. If you don't have keys already saved, it's recommended to generate a new key pair.
ForSSH public key source, select a source for the public key. You can choose to generate a new key pair, use an existing key stored in Azure, or use an existing public key stored on your local computer. If you don't have keys already saved, it's recommended to generate a new key pair.
ForKey pair name, enter a name for the key pair.
ForKey pair name, enter a name for the key pair.
If you choose to use anExisting public key stored in azure, select the key inStored Keysinput
If you choose to use anExisting public key stored in azure, select the key inStored Keysinput
Provide the corresponding SSH private key fromlocal filestored on your computer orcopy pastethe private key.
Provide the corresponding SSH private key fromlocal filestored on your computer orcopy pastethe private key.
If you choose to use anExisting public key, you can either Provide the SSH public key fromlocal filestored on your computer orcopy pastethe public key.
If you choose to use anExisting public key, you can either Provide the SSH public key fromlocal filestored on your computer orcopy pastethe public key.
Provide the corresponding SSH private key fromlocal filestored on your computer orcopy pastethe private key.
Provide the corresponding SSH private key fromlocal filestored on your computer orcopy pastethe private key.
UnderSAP Transport Directory, enter how you want to set up the transport directory on this SID. This is applicable for Distributed with High Availability and Distributed deployments only.ForSAP Transport Options, you can choose toCreate a new SAP transport DirectoryorUse an existing SAP transport Directoryor completely skip the creation of transport directory by choosingDon't include SAP transport directoryoption. Currently, only NFS on AFS storage account fileshares is supported.If you choose toCreate a new SAP transport Directory, this will create and mount a new transport fileshare on the SID. By Default, this option will create an NFS on AFS storage account and a transport fileshare in the resource group where SAP system will be deployed. However, you can choose to create this storage account in a different resource group by providing the resource group name inTransport Resource Group. You can also provide a custom name for the storage account to be created underStorage account namesection. Leaving theStorage account namewill create the storage account with service default name""SIDname""nfs""random characters""in the chosen transport resource group. Creating a new transport directory will create a ZRS based replication for zonal deployments and LRS based replication for non-zonal deployments. If your region doesn't support ZRS replication deploying a zonal VIS will lead to a failure. In such cases, you can deploy a transport fileshare outside Azure Center for SAP Solutions with ZRS replication and then create a zonal VIS where you selectUse an existing SAP transport Directoryto mount the pre-created fileshare.If you choose toUse an existing SAP transport Directory, select the pre - existing NFS fileshare underFile share nameoption. The existing transport fileshare will be only mounted on this SID. The selected fileshare shall be in the same region as that of SAP system being created. Currently, file shares existing in a different region cannot be selected. Provide the associated private endpoint of the  storage account where the selected fileshare exists underPrivate Endpointoption.You can skip the creation of transport file share by selectingDon't include SAP transport directoryoption. The transport fileshare will neither be created or mounted for this SID.
UnderSAP Transport Directory, enter how you want to set up the transport directory on this SID. This is applicable for Distributed with High Availability and Distributed deployments only.
ForSAP Transport Options, you can choose toCreate a new SAP transport DirectoryorUse an existing SAP transport Directoryor completely skip the creation of transport directory by choosingDon't include SAP transport directoryoption. Currently, only NFS on AFS storage account fileshares is supported.
ForSAP Transport Options, you can choose toCreate a new SAP transport DirectoryorUse an existing SAP transport Directoryor completely skip the creation of transport directory by choosingDon't include SAP transport directoryoption. Currently, only NFS on AFS storage account fileshares is supported.
If you choose toCreate a new SAP transport Directory, this will create and mount a new transport fileshare on the SID. By Default, this option will create an NFS on AFS storage account and a transport fileshare in the resource group where SAP system will be deployed. However, you can choose to create this storage account in a different resource group by providing the resource group name inTransport Resource Group. You can also provide a custom name for the storage account to be created underStorage account namesection. Leaving theStorage account namewill create the storage account with service default name""SIDname""nfs""random characters""in the chosen transport resource group. Creating a new transport directory will create a ZRS based replication for zonal deployments and LRS based replication for non-zonal deployments. If your region doesn't support ZRS replication deploying a zonal VIS will lead to a failure. In such cases, you can deploy a transport fileshare outside Azure Center for SAP Solutions with ZRS replication and then create a zonal VIS where you selectUse an existing SAP transport Directoryto mount the pre-created fileshare.
If you choose toCreate a new SAP transport Directory, this will create and mount a new transport fileshare on the SID. By Default, this option will create an NFS on AFS storage account and a transport fileshare in the resource group where SAP system will be deployed. However, you can choose to create this storage account in a different resource group by providing the resource group name inTransport Resource Group. You can also provide a custom name for the storage account to be created underStorage account namesection. Leaving theStorage account namewill create the storage account with service default name""SIDname""nfs""random characters""in the chosen transport resource group. Creating a new transport directory will create a ZRS based replication for zonal deployments and LRS based replication for non-zonal deployments. If your region doesn't support ZRS replication deploying a zonal VIS will lead to a failure. In such cases, you can deploy a transport fileshare outside Azure Center for SAP Solutions with ZRS replication and then create a zonal VIS where you selectUse an existing SAP transport Directoryto mount the pre-created fileshare.
If you choose toUse an existing SAP transport Directory, select the pre - existing NFS fileshare underFile share nameoption. The existing transport fileshare will be only mounted on this SID. The selected fileshare shall be in the same region as that of SAP system being created. Currently, file shares existing in a different region cannot be selected. Provide the associated private endpoint of the  storage account where the selected fileshare exists underPrivate Endpointoption.
If you choose toUse an existing SAP transport Directory, select the pre - existing NFS fileshare underFile share nameoption. The existing transport fileshare will be only mounted on this SID. The selected fileshare shall be in the same region as that of SAP system being created. Currently, file shares existing in a different region cannot be selected. Provide the associated private endpoint of the  storage account where the selected fileshare exists underPrivate Endpointoption.
You can skip the creation of transport file share by selectingDon't include SAP transport directoryoption. The transport fileshare will neither be created or mounted for this SID.
You can skip the creation of transport file share by selectingDon't include SAP transport directoryoption. The transport fileshare will neither be created or mounted for this SID.
UnderConfiguration Details, enter the FQDN for your SAP System.ForSAP FQDN, provide only the domain name for your system such "sap.contoso.com"
UnderConfiguration Details, enter the FQDN for your SAP System.
ForSAP FQDN, provide only the domain name for your system such "sap.contoso.com"
UnderUser assigned managed identity, provide the identity which Azure Center for SAP solutions will use to deploy infrastructure.ForManaged identity source, choose if you want the service to create a new managed identity or you can instead use an existing identity. If you wish to allow the service to create a managed identity, acknowledge the checkbox which asks for your consent for the identity to be created and the contributor role access to be added for all resource groups.ForManaged identity name, enter a name for a new identity you want to create or select an existing identity from the drop down menu. If you are selecting an existing identity, it should haveContributorrole access on the Subscription or on Resource Groups related to this SAP system you are trying to deploy. That is, it requires Contributor access to the SAP application Resource Group, Virtual Network Resource Group and Resource Group which has the existing SSHKEY. If you wish to later install the SAP system using Azure Center for SAP Solutions, we also recommend giving theStorage Blob Data Reader and ReaderandData Access roleson the Storage Account which has the SAP software media.
UnderUser assigned managed identity, provide the identity which Azure Center for SAP solutions will use to deploy infrastructure.
ForManaged identity source, choose if you want the service to create a new managed identity or you can instead use an existing identity. If you wish to allow the service to create a managed identity, acknowledge the checkbox which asks for your consent for the identity to be created and the contributor role access to be added for all resource groups.
ForManaged identity source, choose if you want the service to create a new managed identity or you can instead use an existing identity. If you wish to allow the service to create a managed identity, acknowledge the checkbox which asks for your consent for the identity to be created and the contributor role access to be added for all resource groups.
ForManaged identity name, enter a name for a new identity you want to create or select an existing identity from the drop down menu. If you are selecting an existing identity, it should haveContributorrole access on the Subscription or on Resource Groups related to this SAP system you are trying to deploy. That is, it requires Contributor access to the SAP application Resource Group, Virtual Network Resource Group and Resource Group which has the existing SSHKEY. If you wish to later install the SAP system using Azure Center for SAP Solutions, we also recommend giving theStorage Blob Data Reader and ReaderandData Access roleson the Storage Account which has the SAP software media.
ForManaged identity name, enter a name for a new identity you want to create or select an existing identity from the drop down menu. If you are selecting an existing identity, it should haveContributorrole access on the Subscription or on Resource Groups related to this SAP system you are trying to deploy. That is, it requires Contributor access to the SAP application Resource Group, Virtual Network Resource Group and Resource Group which has the existing SSHKEY. If you wish to later install the SAP system using Azure Center for SAP Solutions, we also recommend giving theStorage Blob Data Reader and ReaderandData Access roleson the Storage Account which has the SAP software media.
UnderManaged resource settings, choose the network settings for the managed storage account deployed into your subscription. This storage account is required for ACSS to orchestrate the deployment of new SAP system and further power all the SAP management capabilities.ForStorage account network access, select Enable access from specific virtual network for enhanced network security access for the managed storage account. This option ensures that this storage account is accessible only from the virtual network in which the SAP system exists.ImportantTo use the secure network access option, you must enable Microsoft.Storageservice endpointon the Application and Database subnets. You can learn more about storage account network security inthis documentation. Private endpoint on managed storage account is not currently supported in this scenario.When you choose to limit network access to specific virtual networks, Azure Center for SAP solutions service accesses this storage account usingtrusted accessbased on the managed identity associated with the VIS resource.
UnderManaged resource settings, choose the network settings for the managed storage account deployed into your subscription. This storage account is required for ACSS to orchestrate the deployment of new SAP system and further power all the SAP management capabilities.
ForStorage account network access, select Enable access from specific virtual network for enhanced network security access for the managed storage account. This option ensures that this storage account is accessible only from the virtual network in which the SAP system exists.
Important
To use the secure network access option, you must enable Microsoft.Storageservice endpointon the Application and Database subnets. You can learn more about storage account network security inthis documentation. Private endpoint on managed storage account is not currently supported in this scenario.
When you choose to limit network access to specific virtual networks, Azure Center for SAP solutions service accesses this storage account usingtrusted accessbased on the managed identity associated with the VIS resource.
SelectNext: Virtual machines.
SelectNext: Virtual machines.
In theVirtual machinestab, generate SKU size and total VM count recommendations for each SAP instance from Azure Center for SAP solutions.ForGenerate Recommendation based on, underGet virtual machine recommendations, selectSAP Application Performance Standard (SAPS).ForSAPS for application tier, provide the total SAPS for the application tier. For example, 30,000.ForMemory size for database (GiB), provide the total memory size required for the database tier. For example, 1024. The value must be greater than zero, and less than or equal to 11,400.SelectGenerate Recommendation.Review the VM size and count recommendations for ASCS, Application Server, and Database instances.To change a SKU size recommendation, select the drop-down menu or selectSee all sizes. Filter the list or search for your preferred SKU.To change the Application server count, enter a new count forNumber of VMsunderApplication virtual machines.The number of VMs for ASCS and Database instances aren't editable. The default number for each is2.Azure Center for SAP solutions automatically configures a database disk layout for the deployment. To view the layout for a single database server, make sure to select a VM SKU. Then, selectView disk configuration. If there's more than one database server, the layout applies to each server.
In theVirtual machinestab, generate SKU size and total VM count recommendations for each SAP instance from Azure Center for SAP solutions.
ForGenerate Recommendation based on, underGet virtual machine recommendations, selectSAP Application Performance Standard (SAPS).
ForGenerate Recommendation based on, underGet virtual machine recommendations, selectSAP Application Performance Standard (SAPS).
ForSAPS for application tier, provide the total SAPS for the application tier. For example, 30,000.
ForSAPS for application tier, provide the total SAPS for the application tier. For example, 30,000.
ForMemory size for database (GiB), provide the total memory size required for the database tier. For example, 1024. The value must be greater than zero, and less than or equal to 11,400.
ForMemory size for database (GiB), provide the total memory size required for the database tier. For example, 1024. The value must be greater than zero, and less than or equal to 11,400.
SelectGenerate Recommendation.
SelectGenerate Recommendation.
Review the VM size and count recommendations for ASCS, Application Server, and Database instances.
Review the VM size and count recommendations for ASCS, Application Server, and Database instances.
To change a SKU size recommendation, select the drop-down menu or selectSee all sizes. Filter the list or search for your preferred SKU.
To change a SKU size recommendation, select the drop-down menu or selectSee all sizes. Filter the list or search for your preferred SKU.
To change the Application server count, enter a new count forNumber of VMsunderApplication virtual machines.The number of VMs for ASCS and Database instances aren't editable. The default number for each is2.Azure Center for SAP solutions automatically configures a database disk layout for the deployment. To view the layout for a single database server, make sure to select a VM SKU. Then, selectView disk configuration. If there's more than one database server, the layout applies to each server.
To change the Application server count, enter a new count forNumber of VMsunderApplication virtual machines.
The number of VMs for ASCS and Database instances aren't editable. The default number for each is2.
Azure Center for SAP solutions automatically configures a database disk layout for the deployment. To view the layout for a single database server, make sure to select a VM SKU. Then, selectView disk configuration. If there's more than one database server, the layout applies to each server.
SelectNext: Visualize Architecture.
SelectNext: Visualize Architecture.
In theVisualize Architecturetab, visualize the architecture of the VIS that you're deploying.To view the visualization, make sure to configure all the inputs listed on the tab.Optionally, click and drag resources or containers to move them around visually.Click onResetto reset the visualization to its default state. That is, revert any changes you might have made to the position of resources or containers.Click onScale to fitto reset the visualization to its default zoom level.Click onZoom into zoom into the visualization.Click onZoom outto zoom out of the visualization.Click onDownload JPGto export the visualization as a JPG file.Click onFeedbackto share your feedback on the visualization experience.The visualization doesn't represent all resources for the VIS that you're deploying, for instance it doesn't represent disks and NICs.SelectNext: Tags.
In theVisualize Architecturetab, visualize the architecture of the VIS that you're deploying.
To view the visualization, make sure to configure all the inputs listed on the tab.
To view the visualization, make sure to configure all the inputs listed on the tab.
Optionally, click and drag resources or containers to move them around visually.
Optionally, click and drag resources or containers to move them around visually.
Click onResetto reset the visualization to its default state. That is, revert any changes you might have made to the position of resources or containers.
Click onResetto reset the visualization to its default state. That is, revert any changes you might have made to the position of resources or containers.
Click onScale to fitto reset the visualization to its default zoom level.
Click onScale to fitto reset the visualization to its default zoom level.
Click onZoom into zoom into the visualization.
Click onZoom into zoom into the visualization.
Click onZoom outto zoom out of the visualization.
Click onZoom outto zoom out of the visualization.
Click onDownload JPGto export the visualization as a JPG file.
Click onDownload JPGto export the visualization as a JPG file.
Click onFeedbackto share your feedback on the visualization experience.The visualization doesn't represent all resources for the VIS that you're deploying, for instance it doesn't represent disks and NICs.
Click onFeedbackto share your feedback on the visualization experience.
The visualization doesn't represent all resources for the VIS that you're deploying, for instance it doesn't represent disks and NICs.
SelectNext: Tags.
SelectNext: Tags.
Optionally, enter tags to apply to all resources created by the Azure Center for SAP solutions process. These resources include the VIS, ASCS instances, Application Server instances, Database instances, VMs, disks, and NICs.
Optionally, enter tags to apply to all resources created by the Azure Center for SAP solutions process. These resources include the VIS, ASCS instances, Application Server instances, Database instances, VMs, disks, and NICs.
SelectReview + Create.
SelectReview + Create.
Review your settings before deployment.Make sure the validations have passed, and there are no errors listed.Review the Terms of Service, and select the acknowledgment if you agree.SelectCreate.
Review your settings before deployment.
Make sure the validations have passed, and there are no errors listed.
Make sure the validations have passed, and there are no errors listed.
Review the Terms of Service, and select the acknowledgment if you agree.
Review the Terms of Service, and select the acknowledgment if you agree.
SelectCreate.
SelectCreate.
Wait for the infrastructure deployment to complete. Numerous resources are deployed and configured. This process takes approximately 7 minutes.
Wait for the infrastructure deployment to complete. Numerous resources are deployed and configured. This process takes approximately 7 minutes.
Using a Custom OS Image
You can use custom images for deployment in Azure Center for SAP Solutions from theAzure Compute Gallery
Custom image prerequisites
Make sure that you've met thegeneral SAP deployment prerequisites,downloaded the SAP media, andinstalled the SAP software.
Make sure that you've met thegeneral SAP deployment prerequisites,downloaded the SAP media, andinstalled the SAP software.
Before you use an image from Azure Marketplace for customization, check thelist of supported OS imageversions in Azure Center for SAP Solutions. BYOI is supported on the OS version supported by Azure Center for SAP Solutions. Make sure that Azure Center for SAP Solutions has support for the image, or else the deployment will fail with the following error:The resource ID provided consists of an OS image which is not supported in ACSS. Please ensure that the OS image version is supported in ACSS for a successful installation.
Before you use an image from Azure Marketplace for customization, check thelist of supported OS imageversions in Azure Center for SAP Solutions. BYOI is supported on the OS version supported by Azure Center for SAP Solutions. Make sure that Azure Center for SAP Solutions has support for the image, or else the deployment will fail with the following error:The resource ID provided consists of an OS image which is not supported in ACSS. Please ensure that the OS image version is supported in ACSS for a successful installation.
Refer to SAP installation documentation to ensure the operating system prerequisites are met for the deployment to be successful.
Refer to SAP installation documentation to ensure the operating system prerequisites are met for the deployment to be successful.
Check that the user-assigned managed identity has theReader roleon the gallery of the custom OS image. Otherwise, the deployment will fail.
Check that the user-assigned managed identity has theReader roleon the gallery of the custom OS image. Otherwise, the deployment will fail.
Create and upload a VM to a gallery in Azure Compute Gallery
Create and upload a VM to a gallery in Azure Compute Gallery
Before beginning the deployment, make sure the image is available in Azure Compute Gallery.
Before beginning the deployment, make sure the image is available in Azure Compute Gallery.
Verify that the image is in same subscription as the deployment.
Verify that the image is in same subscription as the deployment.
Check that the image VM is of theStandardsecurity type.
Check that the image VM is of theStandardsecurity type.
Deploying using Custom Operating System Image
Select theUse a custom imageoption during deployment. Choose which image to use for the application and database OS.
Select theUse a custom imageoption during deployment. Choose which image to use for the application and database OS.
Azure Center for SAP Solutions validates the base operating system version of the custom OS Image is available in the supportability matrix in Azure Center for SAP Solutions. If the versions are unsupported, the deployment fails. To fix this problem, delete the VIS and infrastructure resources from the resource group, then deploy again with a supported image.
Azure Center for SAP Solutions validates the base operating system version of the custom OS Image is available in the supportability matrix in Azure Center for SAP Solutions. If the versions are unsupported, the deployment fails. To fix this problem, delete the VIS and infrastructure resources from the resource group, then deploy again with a supported image.
Make sure the image version that you're using iscompatible with the SAP software version.
Make sure the image version that you're using iscompatible with the SAP software version.
Confirm deployment
To confirm a deployment is successful:
In theAzure portal, search for and selectVirtual Instances for SAP solutions.
In theAzure portal, search for and selectVirtual Instances for SAP solutions.
On theVirtual Instances for SAP solutionspage, select theSubscriptionfilter, and choose the subscription where you created the deployment.
On theVirtual Instances for SAP solutionspage, select theSubscriptionfilter, and choose the subscription where you created the deployment.
In the table of records, find the name of the VIS. TheInfrastructurecolumn value showsDeployedfor successful deployments.
In the table of records, find the name of the VIS. TheInfrastructurecolumn value showsDeployedfor successful deployments.
If the deployment fails, delete the VIS resource in the Azure portal, then recreate the infrastructure.
Next steps
Install SAP software on your infrastructure
Feedback
Was this page helpful?
Additional resources