Note
Access to this page requires authorization. You can trysigning inorchanging directories.
Access to this page requires authorization. You can trychanging directories.
NuGetCommand@2 - NuGet v2 task
Article
2025-03-28
7 contributors
In this article
Use this task to restore, pack, or push NuGet packages, or run a NuGet command. This task supports NuGet.org and authenticated feeds like Azure Artifacts and MyGet. This task also uses NuGet.exe and works with .NET Framework apps. For .NET Core and .NET Standard apps, use the .NET Core task.
Syntax
# NuGet v2
# Restore, pack, or push NuGet packages, or run a NuGet command. Supports NuGet.org and authenticated feeds like Azure Artifacts and MyGet. Uses NuGet.exe and works with .NET Framework apps. For .NET Core and .NET Standard apps, use the .NET Core task.
- task: NuGetCommand@2
  inputs:
    command: 'restore' # 'restore' | 'pack' | 'push' | 'custom'. Required. Command. Default: restore.
    restoreSolution: '**/*.sln' # string. Alias: solution. Required when command = restore. Path to solution, packages.config, or project.json. Default: **/*.sln.
    #packagesToPush: '$(Build.ArtifactStagingDirectory)/**/*.nupkg;!$(Build.ArtifactStagingDirectory)/**/*.symbols.nupkg' # string. Alias: searchPatternPush. Required when command = push. Path to NuGet package(s) to publish. Default: $(Build.ArtifactStagingDirectory)/**/*.nupkg;!$(Build.ArtifactStagingDirectory)/**/*.symbols.nupkg.
    #nuGetFeedType: 'internal' # 'internal' | 'external'. Required when command = push. Target feed location. Default: internal.
    #publishVstsFeed: # string. Alias: feedPublish. Required when command = push && nuGetFeedType = internal. Target feed. 
    #allowPackageConflicts: false # boolean. Optional. Use when command = push && nuGetFeedType = internal. Allow duplicates to be skipped. Default: false.
    #publishFeedCredentials: # string. Alias: externalEndpoint. Required when command = push && nuGetFeedType = external. NuGet server. 
    #packagesToPack: '**/*.csproj' # string. Alias: searchPatternPack. Required when command = pack. Path to csproj or nuspec file(s) to pack. Default: **/*.csproj.
    #configuration: '$(BuildConfiguration)' # string. Alias: configurationToPack. Optional. Use when command = pack. Configuration to package. Default: $(BuildConfiguration).
    #packDestination: '$(Build.ArtifactStagingDirectory)' # string. Alias: outputDir. Optional. Use when command = pack. Package folder. Default: $(Build.ArtifactStagingDirectory).
    #arguments: # string. Required when command = custom. Command and arguments. 
  # Feeds and authentication
    feedsToUse: 'select' # 'select' | 'config'. Alias: selectOrConfig. Required when command = restore. Feeds to use. Default: select.
    #vstsFeed: # string. Alias: feedRestore. Optional. Use when selectOrConfig = select && command = restore. Use packages from this Azure Artifacts/TFS feed. Select from the dropdown or enter [project name/]feed name. 
    #includeNuGetOrg: true # boolean. Optional. Use when selectOrConfig = select && command = restore. Use packages from NuGet.org. Default: true.
    #nugetConfigPath: # string. Optional. Use when selectOrConfig = config && command = restore. Path to NuGet.config. 
    #externalFeedCredentials: # string. Alias: externalEndpoints. Optional. Use when selectOrConfig = config && command = restore. Credentials for feeds outside this organization/collection. 
  # Advanced
    #noCache: false # boolean. Optional. Use when command = restore. Disable local cache. Default: false.
    #disableParallelProcessing: false # boolean. Optional. Use when command = restore. Disable parallel processing. Default: false.
    #restoreDirectory: # string. Alias: packagesDirectory. Optional. Use when command = restore. Destination directory. 
    #verbosityRestore: 'Detailed' # 'Quiet' | 'Normal' | 'Detailed'. Optional. Use when command = restore. Verbosity. Default: Detailed.
  # Advanced
    #publishPackageMetadata: true # boolean. Optional. Use when command = push && nuGetFeedType = internal. Publish pipeline metadata. Default: true.
    #verbosityPush: 'Detailed' # 'Quiet' | 'Normal' | 'Detailed'. Optional. Use when command = push. Verbosity. Default: Detailed.
  # Pack options
    #versioningScheme: 'off' # 'off' | 'byPrereleaseNumber' | 'byEnvVar' | 'byBuildNumber'. Required when command = pack. Automatic package versioning. Default: off.
    #includeReferencedProjects: false # boolean. Optional. Use when versioningScheme = off && command = pack. Include referenced projects. Default: false.
    #versionEnvVar: # string. Required when versioningScheme = byEnvVar && command = pack. Environment variable. 
    #majorVersion: '1' # string. Alias: requestedMajorVersion. Required when versioningScheme = byPrereleaseNumber && command = pack. Major. Default: 1.
    #minorVersion: '0' # string. Alias: requestedMinorVersion. Required when versioningScheme = byPrereleaseNumber && command = pack. Minor. Default: 0.
    #patchVersion: '0' # string. Alias: requestedPatchVersion. Required when versioningScheme = byPrereleaseNumber && command = pack. Patch. Default: 0.
    #packTimezone: 'utc' # 'utc' | 'local'. Optional. Use when versioningScheme = byPrereleaseNumber && command = pack. Time zone. Default: utc.
    #includeSymbols: false # boolean. Optional. Use when command = pack. Create symbols package. Default: false.
    #toolPackage: false # boolean. Optional. Use when command = pack. Tool Package. Default: false.
  # Advanced
    #buildProperties: # string. Optional. Use when command = pack. Additional build properties. 
    #basePath: # string. Optional. Use when command = pack. Base path. 
    #verbosityPack: 'Detailed' # 'Quiet' | 'Normal' | 'Detailed'. Optional. Use when command = pack. Verbosity. Default: Detailed.
# NuGet v2
# Restore, pack, or push NuGet packages, or run a NuGet command. Supports NuGet.org and authenticated feeds like Azure Artifacts and MyGet. Uses NuGet.exe and works with .NET Framework apps. For .NET Core and .NET Standard apps, use the .NET Core task.
- task: NuGetCommand@2
  inputs:
    command: 'restore' # 'restore' | 'pack' | 'push' | 'custom'. Required. Command. Default: restore.
    restoreSolution: '**/*.sln' # string. Alias: solution. Required when command = restore. Path to solution, packages.config, or project.json. Default: **/*.sln.
    #packagesToPush: '$(Build.ArtifactStagingDirectory)/**/*.nupkg;!$(Build.ArtifactStagingDirectory)/**/*.symbols.nupkg' # string. Alias: searchPatternPush. Required when command = push. Path to NuGet package(s) to publish. Default: $(Build.ArtifactStagingDirectory)/**/*.nupkg;!$(Build.ArtifactStagingDirectory)/**/*.symbols.nupkg.
    #nuGetFeedType: 'internal' # 'internal' | 'external'. Required when command = push. Target feed location. Default: internal.
    #publishVstsFeed: # string. Alias: feedPublish. Required when command = push && nuGetFeedType = internal. Target feed. 
    #allowPackageConflicts: false # boolean. Optional. Use when command = push && nuGetFeedType = internal. Allow duplicates to be skipped. Default: false.
    #publishFeedCredentials: # string. Alias: externalEndpoint. Required when command = push && nuGetFeedType = external. NuGet server. 
    #packagesToPack: '**/*.csproj' # string. Alias: searchPatternPack. Required when command = pack. Path to csproj or nuspec file(s) to pack. Default: **/*.csproj.
    #configuration: '$(BuildConfiguration)' # string. Alias: configurationToPack. Optional. Use when command = pack. Configuration to package. Default: $(BuildConfiguration).
    #packDestination: '$(Build.ArtifactStagingDirectory)' # string. Alias: outputDir. Optional. Use when command = pack. Package folder. Default: $(Build.ArtifactStagingDirectory).
    #arguments: # string. Required when command = custom. Command and arguments. 
  # Feeds and authentication
    feedsToUse: 'select' # 'select' | 'config'. Alias: selectOrConfig. Required when command = restore. Feeds to use. Default: select.
    #vstsFeed: # string. Alias: feedRestore. Optional. Use when selectOrConfig = select && command = restore. Use packages from this Azure Artifacts/TFS feed. Select from the dropdown or enter [project name/]feed name. 
    #includeNuGetOrg: true # boolean. Optional. Use when selectOrConfig = select && command = restore. Use packages from NuGet.org. Default: true.
    #nugetConfigPath: # string. Optional. Use when selectOrConfig = config && command = restore. Path to NuGet.config. 
    #externalFeedCredentials: # string. Alias: externalEndpoints. Optional. Use when selectOrConfig = config && command = restore. Credentials for feeds outside this organization/collection. 
  # Advanced
    #noCache: false # boolean. Optional. Use when command = restore. Disable local cache. Default: false.
    #disableParallelProcessing: false # boolean. Optional. Use when command = restore. Disable parallel processing. Default: false.
    #restoreDirectory: # string. Alias: packagesDirectory. Optional. Use when command = restore. Destination directory. 
    #verbosityRestore: 'Detailed' # 'Quiet' | 'Normal' | 'Detailed'. Optional. Use when command = restore. Verbosity. Default: Detailed.
  # Advanced
    #publishPackageMetadata: true # boolean. Optional. Use when command = push && nuGetFeedType = internal. Publish pipeline metadata. Default: true.
    #verbosityPush: 'Detailed' # 'Quiet' | 'Normal' | 'Detailed'. Optional. Use when command = push. Verbosity. Default: Detailed.
  # Pack options
    #versioningScheme: 'off' # 'off' | 'byPrereleaseNumber' | 'byEnvVar' | 'byBuildNumber'. Required when command = pack. Automatic package versioning. Default: off.
    #includeReferencedProjects: false # boolean. Optional. Use when versioningScheme = off && command = pack. Include referenced projects. Default: false.
    #versionEnvVar: # string. Required when versioningScheme = byEnvVar && command = pack. Environment variable. 
    #majorVersion: '1' # string. Alias: requestedMajorVersion. Required when versioningScheme = byPrereleaseNumber && command = pack. Major. Default: 1.
    #minorVersion: '0' # string. Alias: requestedMinorVersion. Required when versioningScheme = byPrereleaseNumber && command = pack. Minor. Default: 0.
    #patchVersion: '0' # string. Alias: requestedPatchVersion. Required when versioningScheme = byPrereleaseNumber && command = pack. Patch. Default: 0.
    #packTimezone: 'utc' # 'utc' | 'local'. Optional. Use when versioningScheme = byPrereleaseNumber && command = pack. Time zone. Default: utc.
    #includeSymbols: false # boolean. Optional. Use when command = pack. Create symbols package. Default: false.
    #toolPackage: false # boolean. Optional. Use when command = pack. Tool Package. Default: false.
  # Advanced
    #buildProperties: # string. Optional. Use when command = pack. Additional build properties. 
    #basePath: # string. Optional. Use when command = pack. Base path. 
    #verbosityPack: 'Detailed' # 'Quiet' | 'Normal' | 'Detailed'. Optional. Use when command = pack. Verbosity. Default: Detailed.
# NuGet v2
# Restore, pack, or push NuGet packages, or run a NuGet command. Supports NuGet.org and authenticated feeds like Azure Artifacts and MyGet. Uses NuGet.exe and works with .NET Framework apps. For .NET Core and .NET Standard apps, use the .NET Core task.
- task: NuGetCommand@2
  inputs:
    command: 'restore' # 'restore' | 'pack' | 'push' | 'custom'. Required. Command. Default: restore.
    restoreSolution: '**/*.sln' # string. Alias: solution. Required when command = restore. Path to solution, packages.config, or project.json. Default: **/*.sln.
    #packagesToPush: '$(Build.ArtifactStagingDirectory)/**/*.nupkg;!$(Build.ArtifactStagingDirectory)/**/*.symbols.nupkg' # string. Alias: searchPatternPush. Required when command = push. Path to NuGet package(s) to publish. Default: $(Build.ArtifactStagingDirectory)/**/*.nupkg;!$(Build.ArtifactStagingDirectory)/**/*.symbols.nupkg.
    #nuGetFeedType: 'internal' # 'internal' | 'external'. Required when command = push. Target feed location. Default: internal.
    #publishVstsFeed: # string. Alias: feedPublish. Required when command = push && nuGetFeedType = internal. Target feed. 
    #allowPackageConflicts: false # boolean. Optional. Use when command = push && nuGetFeedType = internal. Allow duplicates to be skipped. Default: false.
    #publishFeedCredentials: # string. Alias: externalEndpoint. Required when command = push && nuGetFeedType = external. NuGet server. 
    #packagesToPack: '**/*.csproj' # string. Alias: searchPatternPack. Required when command = pack. Path to csproj or nuspec file(s) to pack. Default: **/*.csproj.
    #configuration: '$(BuildConfiguration)' # string. Alias: configurationToPack. Optional. Use when command = pack. Configuration to package. Default: $(BuildConfiguration).
    #packDestination: '$(Build.ArtifactStagingDirectory)' # string. Alias: outputDir. Optional. Use when command = pack. Package folder. Default: $(Build.ArtifactStagingDirectory).
    #arguments: # string. Required when command = custom. Command and arguments. 
  # Feeds and authentication
    feedsToUse: 'select' # 'select' | 'config'. Alias: selectOrConfig. Required when command = restore. Feeds to use. Default: select.
    #vstsFeed: # string. Alias: feedRestore. Optional. Use when selectOrConfig = select && command = restore. Use packages from this Azure Artifacts/TFS feed. 
    #includeNuGetOrg: true # boolean. Optional. Use when selectOrConfig = select && command = restore. Use packages from NuGet.org. Default: true.
    #nugetConfigPath: # string. Optional. Use when selectOrConfig = config && command = restore. Path to NuGet.config. 
    #externalFeedCredentials: # string. Alias: externalEndpoints. Optional. Use when selectOrConfig = config && command = restore. Credentials for feeds outside this organization/collection. 
  # Advanced
    #noCache: false # boolean. Optional. Use when command = restore. Disable local cache. Default: false.
    #disableParallelProcessing: false # boolean. Optional. Use when command = restore. Disable parallel processing. Default: false.
    #restoreDirectory: # string. Alias: packagesDirectory. Optional. Use when command = restore. Destination directory. 
    #verbosityRestore: 'Detailed' # 'Quiet' | 'Normal' | 'Detailed'. Optional. Use when command = restore. Verbosity. Default: Detailed.
  # Advanced
    #publishPackageMetadata: true # boolean. Optional. Use when command = push && nuGetFeedType = internal. Publish pipeline metadata. Default: true.
    #verbosityPush: 'Detailed' # 'Quiet' | 'Normal' | 'Detailed'. Optional. Use when command = push. Verbosity. Default: Detailed.
  # Pack options
    #versioningScheme: 'off' # 'off' | 'byPrereleaseNumber' | 'byEnvVar' | 'byBuildNumber'. Required when command = pack. Automatic package versioning. Default: off.
    #includeReferencedProjects: false # boolean. Optional. Use when versioningScheme = off && command = pack. Include referenced projects. Default: false.
    #versionEnvVar: # string. Required when versioningScheme = byEnvVar && command = pack. Environment variable. 
    #majorVersion: '1' # string. Alias: requestedMajorVersion. Required when versioningScheme = byPrereleaseNumber && command = pack. Major. Default: 1.
    #minorVersion: '0' # string. Alias: requestedMinorVersion. Required when versioningScheme = byPrereleaseNumber && command = pack. Minor. Default: 0.
    #patchVersion: '0' # string. Alias: requestedPatchVersion. Required when versioningScheme = byPrereleaseNumber && command = pack. Patch. Default: 0.
    #packTimezone: 'utc' # 'utc' | 'local'. Optional. Use when versioningScheme = byPrereleaseNumber && command = pack. Time zone. Default: utc.
    #includeSymbols: false # boolean. Optional. Use when command = pack. Create symbols package. Default: false.
    #toolPackage: false # boolean. Optional. Use when command = pack. Tool Package. Default: false.
  # Advanced
    #buildProperties: # string. Optional. Use when command = pack. Additional build properties. 
    #basePath: # string. Optional. Use when command = pack. Base path. 
    #verbosityPack: 'Detailed' # 'Quiet' | 'Normal' | 'Detailed'. Optional. Use when command = pack. Verbosity. Default: Detailed.
# NuGet v2
# Restore, pack, or push NuGet packages, or run a NuGet command. Supports NuGet.org and authenticated feeds like Azure Artifacts and MyGet. Uses NuGet.exe and works with .NET Framework apps. For .NET Core and .NET Standard apps, use the .NET Core task.
- task: NuGetCommand@2
  inputs:
    command: 'restore' # 'restore' | 'pack' | 'push' | 'custom'. Required. Command. Default: restore.
    restoreSolution: '**/*.sln' # string. Alias: solution. Required when command = restore. Path to solution, packages.config, or project.json. Default: **/*.sln.
    #packagesToPush: '$(Build.ArtifactStagingDirectory)/**/*.nupkg;!$(Build.ArtifactStagingDirectory)/**/*.symbols.nupkg' # string. Alias: searchPatternPush. Required when command = push. Path to NuGet package(s) to publish. Default: $(Build.ArtifactStagingDirectory)/**/*.nupkg;!$(Build.ArtifactStagingDirectory)/**/*.symbols.nupkg.
    #nuGetFeedType: 'internal' # 'internal' | 'external'. Required when command = push. Target feed location. Default: internal.
    #publishVstsFeed: # string. Alias: feedPublish. Required when command = push && nuGetFeedType = internal. Target feed. 
    #allowPackageConflicts: false # boolean. Optional. Use when command = push && nuGetFeedType = internal. Allow duplicates to be skipped. Default: false.
    #publishFeedCredentials: # string. Alias: externalEndpoint. Required when command = push && nuGetFeedType = external. NuGet server. 
    #packagesToPack: '**/*.csproj' # string. Alias: searchPatternPack. Required when command = pack. Path to csproj or nuspec file(s) to pack. Default: **/*.csproj.
    #configuration: '$(BuildConfiguration)' # string. Alias: configurationToPack. Optional. Use when command = pack. Configuration to package. Default: $(BuildConfiguration).
    #packDestination: '$(Build.ArtifactStagingDirectory)' # string. Alias: outputDir. Optional. Use when command = pack. Package folder. Default: $(Build.ArtifactStagingDirectory).
    #arguments: # string. Required when command = custom. Command and arguments. 
  # Feeds and authentication
    feedsToUse: 'select' # 'select' | 'config'. Alias: selectOrConfig. Required when command = restore. Feeds to use. Default: select.
    #vstsFeed: # string. Alias: feedRestore. Optional. Use when selectOrConfig = select && command = restore. Use packages from this Azure Artifacts/TFS feed. 
    #includeNuGetOrg: true # boolean. Optional. Use when selectOrConfig = select && command = restore. Use packages from NuGet.org. Default: true.
    #nugetConfigPath: # string. Optional. Use when selectOrConfig = config && command = restore. Path to NuGet.config. 
    #externalFeedCredentials: # string. Alias: externalEndpoints. Optional. Use when selectOrConfig = config && command = restore. Credentials for feeds outside this organization/collection. 
  # Advanced
    #noCache: false # boolean. Optional. Use when command = restore. Disable local cache. Default: false.
    #disableParallelProcessing: false # boolean. Optional. Use when command = restore. Disable parallel processing. Default: false.
    #restoreDirectory: # string. Alias: packagesDirectory. Optional. Use when command = restore. Destination directory. 
    #verbosityRestore: 'Detailed' # 'Quiet' | 'Normal' | 'Detailed'. Optional. Use when command = restore. Verbosity. Default: Detailed.
  # Advanced
    #publishPackageMetadata: true # boolean. Optional. Use when command = push && nuGetFeedType = internal. Publish pipeline metadata. Default: true.
    #verbosityPush: 'Detailed' # 'Quiet' | 'Normal' | 'Detailed'. Optional. Use when command = push. Verbosity. Default: Detailed.
  # Pack options
    #versioningScheme: 'off' # 'off' | 'byPrereleaseNumber' | 'byEnvVar' | 'byBuildNumber'. Required when command = pack. Automatic package versioning. Default: off.
    #includeReferencedProjects: false # boolean. Optional. Use when versioningScheme = off && command = pack. Include referenced projects. Default: false.
    #versionEnvVar: # string. Required when versioningScheme = byEnvVar && command = pack. Environment variable. 
    #majorVersion: '1' # string. Alias: requestedMajorVersion. Required when versioningScheme = byPrereleaseNumber && command = pack. Major. Default: 1.
    #minorVersion: '0' # string. Alias: requestedMinorVersion. Required when versioningScheme = byPrereleaseNumber && command = pack. Minor. Default: 0.
    #patchVersion: '0' # string. Alias: requestedPatchVersion. Required when versioningScheme = byPrereleaseNumber && command = pack. Patch. Default: 0.
    #packTimezone: 'utc' # 'utc' | 'local'. Optional. Use when versioningScheme = byPrereleaseNumber && command = pack. Time zone. Default: utc.
    #includeSymbols: false # boolean. Optional. Use when command = pack. Create symbols package. Default: false.
    #toolPackage: false # boolean. Optional. Use when command = pack. Tool Package. Default: false.
  # Advanced
    #buildProperties: # string. Optional. Use when command = pack. Additional build properties. 
    #basePath: # string. Optional. Use when command = pack. Base path. 
    #verbosityPack: 'Detailed' # 'Quiet' | 'Normal' | 'Detailed'. Optional. Use when command = pack. Verbosity. Default: Detailed.
Inputs
command-Commandstring. Required. Allowed values:restore,pack,push,custom. Default value:restore.
command
string
restore
pack
push
custom
restore
Specifies the NuGet command to run. Use thecustomvalue to add arguments or to use a different command.
custom
restoreSolution-Path to solution, packages.config, or project.jsonInput alias:solution.string. Required whencommand = restore. Default value:**/*.sln.
restoreSolution
solution
string
command = restore
**/*.sln
Specifies the path to the solution,packages.config, orproject.jsonfile that references the packages to be restored.
packages.config
project.json
feedsToUse-Feeds to useInput alias:selectOrConfig.string. Required whencommand = restore. Allowed values:select(Feed(s) I select here),config(Feeds in my NuGet.config). Default value:select.
feedsToUse
selectOrConfig
string
command = restore
select
config
select
Specifies a feed from Azure Artifacts and/or NuGet.org for the task to use with theselectvalue. Alternatively, you can commit aNuGet.configfile to your source code repository and set its path as the value using theconfigvalue.
select
NuGet.config
config
vstsFeed-Use packages from this Azure Artifacts/TFS feed. Select from the dropdown or enter [project name/]feed name.Input alias:feedRestore.string. Optional. Use whenselectOrConfig = select && command = restore.
vstsFeed
feedRestore
string
selectOrConfig = select && command = restore
Specifies the selected feed in the generatedNuGet.config. You must have Package Management installed and licensed to specify a feed here.
NuGet.config
vstsFeed-Use packages from this Azure Artifacts/TFS feedInput alias:feedRestore.string. Optional. Use whenselectOrConfig = select && command = restore.
vstsFeed
feedRestore
string
selectOrConfig = select && command = restore
Specifies the selected feed in the generatedNuGet.config. You must have Package Management installed and licensed to specify a feed here.
NuGet.config
includeNuGetOrg-Use packages from NuGet.orgboolean. Optional. Use whenselectOrConfig = select && command = restore. Default value:true.
includeNuGetOrg
boolean
selectOrConfig = select && command = restore
true
Includes NuGet.org in the generatedNuGet.config.
NuGet.config
nugetConfigPath-Path to NuGet.configstring. Optional. Use whenselectOrConfig = config && command = restore.
nugetConfigPath
string
selectOrConfig = config && command = restore
Specifies the path to theNuGet.configin your repository that determines the feeds from which to restore packages.
NuGet.config
externalFeedCredentials-Credentials for feeds outside this organization/collectionInput alias:externalEndpoints.string. Optional. Use whenselectOrConfig = config && command = restore.
externalFeedCredentials
externalEndpoints
string
selectOrConfig = config && command = restore
Specifies the credentials to use for external registries located in the selectedNuGet.config. This is the name of your NuGet service connection. For feeds in this organization or collection, leave this blank; the build's credentials are used automatically.
NuGet.config
noCache-Disable local cacheboolean. Optional. Use whencommand = restore. Default value:false.
noCache
boolean
command = restore
false
Prevents NuGet from using packages from local machine caches when set totrue.
true
disableParallelProcessing-Disable parallel processingboolean. Optional. Use whencommand = restore. Default value:false.
disableParallelProcessing
boolean
command = restore
false
Prevents NuGet from installing multiple packages in parallel processes when set totrue.
true
restoreDirectory-Destination directoryInput alias:packagesDirectory.string. Optional. Use whencommand = restore.
restoreDirectory
packagesDirectory
string
command = restore
Specifies the folder in which packages are installed. If no folder is specified, packages are restored into apackages/folder alongside the selected solution,packages.config, orproject.json.
packages/
packages.config
project.json
verbosityRestore-Verbositystring. Optional. Use whencommand = restore. Allowed values:Quiet,Normal,Detailed. Default value:Detailed.
verbosityRestore
string
command = restore
Quiet
Normal
Detailed
Detailed
Specifies the amount of detail displayed in the output.
packagesToPush-Path to NuGet package(s) to publishInput alias:searchPatternPush.string. Required whencommand = push. Default value:$(Build.ArtifactStagingDirectory)/**/*.nupkg;!$(Build.ArtifactStagingDirectory)/**/*.symbols.nupkg.
packagesToPush
searchPatternPush
string
command = push
$(Build.ArtifactStagingDirectory)/**/*.nupkg;!$(Build.ArtifactStagingDirectory)/**/*.symbols.nupkg
Specifies the pattern to match or path tonupkgfiles to be uploaded. Multiple patterns can be separated by a semicolon.
nupkg
nuGetFeedType-Target feed locationstring. Required whencommand = push. Allowed values:internal(This organization/collection),external(External NuGet server (including other accounts/collections)). Default value:internal.
nuGetFeedType
string
command = push
internal
external
internal
Specifies whether the target feed is an internal feed/collection or an external NuGet server.
publishVstsFeed-Target feedInput alias:feedPublish.string. Required whencommand = push && nuGetFeedType = internal.
publishVstsFeed
feedPublish
string
command = push && nuGetFeedType = internal
Specifies a feed hosted in this account. You must have Azure Artifacts installed and licensed to select a feed here.
publishPackageMetadata-Publish pipeline metadataboolean. Optional. Use whencommand = push && nuGetFeedType = internal. Default value:true.
publishPackageMetadata
boolean
command = push && nuGetFeedType = internal
true
Changes the version number of the subset of changed packages within a set of continually published packages.
allowPackageConflicts-Allow duplicates to be skippedboolean. Optional. Use whencommand = push && nuGetFeedType = internal. Default value:false.
allowPackageConflicts
boolean
command = push && nuGetFeedType = internal
false
Reports task success even if some of your packages are rejected with 409 Conflict errors.
This option is currently only available on Azure Pipelines and Windows agents. IfNuGet.exeencounters a conflict, the task will fail. This option will not work and publishing will fail if you are within a proxy environment.
NuGet.exe
publishFeedCredentials-NuGet serverInput alias:externalEndpoint.string. Required whencommand = push && nuGetFeedType = external.
publishFeedCredentials
externalEndpoint
string
command = push && nuGetFeedType = external
Specifies the NuGet service connection that contains the external NuGet serverâs credentials.
verbosityPush-Verbositystring. Optional. Use whencommand = push. Allowed values:Quiet,Normal,Detailed. Default value:Detailed.
verbosityPush
string
command = push
Quiet
Normal
Detailed
Detailed
Specifies the amount of detail displayed in the output.
packagesToPack-Path to csproj or nuspec file(s) to packInput alias:searchPatternPack.string. Required whencommand = pack. Default value:**/*.csproj.
packagesToPack
searchPatternPack
string
command = pack
**/*.csproj
Specifies the pattern that the task uses to search for csproj directories to pack.
You can separate multiple patterns with a semicolon, and you can make a pattern negative by prefixing it with!. Example:**\*.csproj;!**\*.Tests.csproj.
!
**\*.csproj;!**\*.Tests.csproj
configuration-Configuration to packageInput alias:configurationToPack.string. Optional. Use whencommand = pack. Default value:$(BuildConfiguration).
configuration
configurationToPack
string
command = pack
$(BuildConfiguration)
Specifies the configuration to package when using a csproj file.
packDestination-Package folderInput alias:outputDir.string. Optional. Use whencommand = pack. Default value:$(Build.ArtifactStagingDirectory).
packDestination
outputDir
string
command = pack
$(Build.ArtifactStagingDirectory)
Specifies the folder where the task creates packages. If the value is empty, the task creates packages at the source root.
versioningScheme-Automatic package versioningstring. Required whencommand = pack. Allowed values:off,byPrereleaseNumber(Use the date and time),byEnvVar(Use an environment variable),byBuildNumber(Use the build number). Default value:off.
versioningScheme
string
command = pack
off
byPrereleaseNumber
byEnvVar
byBuildNumber
off
Applies automatic package versioning depending on the specified value. This string cannot be used withincludeReferencedProjects. The allowed values are:
includeReferencedProjects
byPrereleaseNumber-Use the date and time: The task will generate aSemVer-compliant version formatted asX.Y.Z-ci-datetime, where you specify the values of X, Y, and Z.
byPrereleaseNumber
X.Y.Z-ci-datetime
byEnvVar-Use an environment variable: The task will use an environment variable that you specify and contains the version number you want to use.
byEnvVar
byBuildNumber-Use the build number: The task will use the build number to version the package.
byBuildNumber
Note
Under General, set the build format to be$(BuildDefinitionName)_$(Year:yyyy).$(Month).$(DayOfMonth)$(Rev:.r).
$(BuildDefinitionName)_$(Year:yyyy).$(Month).$(DayOfMonth)$(Rev:.r)
includeReferencedProjects-Include referenced projectsboolean. Optional. Use whenversioningScheme = off && command = pack. Default value:false.
includeReferencedProjects
boolean
versioningScheme = off && command = pack
false
Includes referenced projects either as dependencies or as part of the package. Cannot be used with automatic package versioning. If a referenced project has a correspondingnuspecfile that has the same name as the project, then that referenced project is added as a dependency. Otherwise, the referenced project is added as part of the package. Learn more aboutusing the pack command for NuGet CLI to create NuGet packages.
nuspec
versionEnvVar-Environment variablestring. Required whenversioningScheme = byEnvVar && command = pack.
versionEnvVar
string
versioningScheme = byEnvVar && command = pack
Specifies the variable name without$,$env, or%.
$
$env
%
majorVersion-MajorInput alias:requestedMajorVersion.string. Required whenversioningScheme = byPrereleaseNumber && command = pack. Default value:1.
majorVersion
requestedMajorVersion
string
versioningScheme = byPrereleaseNumber && command = pack
1
TheXin versionX.Y.Z.
X
minorVersion-MinorInput alias:requestedMinorVersion.string. Required whenversioningScheme = byPrereleaseNumber && command = pack. Default value:0.
minorVersion
requestedMinorVersion
string
versioningScheme = byPrereleaseNumber && command = pack
0
TheYin versionX.Y.Z.
Y
patchVersion-PatchInput alias:requestedPatchVersion.string. Required whenversioningScheme = byPrereleaseNumber && command = pack. Default value:0.
patchVersion
requestedPatchVersion
string
versioningScheme = byPrereleaseNumber && command = pack
0
TheZin versionX.Y.Z.
Z
packTimezone-Time zonestring. Optional. Use whenversioningScheme = byPrereleaseNumber && command = pack. Allowed values:utc,local(Agent local time). Default value:utc.
packTimezone
string
versioningScheme = byPrereleaseNumber && command = pack
utc
local
utc
Specifies the desired time zone used to produce the version of the package. Selectingutcis recommended if you're using hosted build agents, as their date and time might differ.
utc
includeSymbols-Create symbols packageboolean. Optional. Use whencommand = pack. Default value:false.
includeSymbols
boolean
command = pack
false
Specifies that the package contains sources and symbols. When used with a.nuspecfile, this creates a regular NuGet package file and the corresponding symbols package.
.nuspec
toolPackage-Tool Packageboolean. Optional. Use whencommand = pack. Default value:false.
toolPackage
boolean
command = pack
false
Determines if the output files of the project should be in the tool folder.
buildProperties-Additional build propertiesstring. Optional. Use whencommand = pack.
buildProperties
string
command = pack
Specifies a list of token=value pairs, separated by semicolons, where each occurrence of$token$in the.nuspecfile will be replaced with the given value. Values can be strings in quotation marks.
$token$
.nuspec
basePath-Base pathstring. Optional. Use whencommand = pack.
basePath
string
command = pack
Specifies the base path of the files defined in thenuspecfile.
nuspec
verbosityPack-Verbositystring. Optional. Use whencommand = pack. Allowed values:Quiet,Normal,Detailed. Default value:Detailed.
verbosityPack
string
command = pack
Quiet
Normal
Detailed
Detailed
Specifies the amount of detail displayed in the output.
arguments-Command and argumentsstring. Required whencommand = custom.
arguments
string
command = custom
Specifies the command and arguments that will be passed toNuGet.exefor execution. If NuGet 3.5 or later is used, authenticated commands likelist,restore, andpublishagainst any feed in this organization or collection that the Project Collection Build Service has access to will be automatically authenticated.
NuGet.exe
list
restore
publish
Task control options
All tasks have control options in addition to their task inputs. For more information, seeControl options and common task properties.
Output variables
None.
Remarks
Important
TheNuGet Authenticatetask is the new recommended way to authenticate with Azure Artifacts and other NuGet repositories. This task no longer takes new features, and only critical bugs are addressed.
Use this task to install and update NuGet package dependencies, or package and publish NuGet packages. Uses NuGet.exe and works with .NET Framework apps. For .NET Core and .NET Standard apps, use the .NET Core task.
If your code depends on NuGet packages, make sure to add this step before yourVisual Studio Build task. Also make sure to clear the deprecatedRestore NuGet Packagescheckbox in that task.
If you are working with .NET Core or .NET Standard, use the.NET Coretask, which has full support for all package scenarios and is currently supported by dotnet.
Tip
This version of the NuGet task uses NuGet 4.1.0 by default. To select a different version of NuGet, use theTool Installer.
Versioning schemes
ForbyPrereleaseNumber, the version will be set to the values you choose for the major version, the minor version, and the patch, plus the date and time, in the formatyyyymmdd-hhmmss.
yyyymmdd-hhmmss
ForbyEnvVar, the version will be set to the value of the environment variable that has the name specified by theversionEnvVarparameter, e.g.MyVersion(no$, just the environment variable name). Make sure the environment variable is set to a proper SemVer, such as1.2.3or1.2.3-beta1.
MyVersion
1.2.3
1.2.3-beta1
ForbyBuildNumber, the version will be set using the pipeline run's build number. This is the value specified for the pipeline'snameproperty, which gets saved to theBUILD_BUILDNUMBERenvironment variable). Ensure that the build number being used contains a proper SemVer, such as1.0.$(Rev:r). When usingbyBuildNumber, the task will extract the dotted version,1.2.3.4, from the build number string, and use only that portion.  The rest of the string will be dropped. If you want to use the build number as is, you can usebyEnvVaras described above, and setversionEnvVartoBUILD_BUILDNUMBER.
name
BUILD_BUILDNUMBER
1.0.$(Rev:r)
1.2.3.4
BUILD_BUILDNUMBER
Migrate from NuGetInstaller@0 or NuGetRestore@1
NuGetInstaller@0andNuGetRestore@1are deprecated, and you should replace them in your pipeline withNuGetCommand@2.
NuGetInstaller@0
NuGetRestore@1
NuGetCommand@2
If you were usingNuGetInstaller@0withrestoreMode: restore, configure the following inputs when usingNuGetCommand@2.
NuGetInstaller@0
restoreMode: restore
NuGetCommand@2
command
restore
restoreSolution
If you were usingNuGetInstaller@0withrestoreMode: install, configure the following inputs when usingNuGetCommand@2.
NuGetInstaller@0
restoreMode: install
NuGetCommand@2
command
custom
arguments
nuget install ninject -OutputDirectory c:\proj
arguments
install ninject -OutputDirectory c:\proj
NuGetInstaller@0
nuGetRestoreArgs
arguments
If you were usingNuGetRestore@1, configure the following inputs when usingNuGetCommand@2.
NuGetRestore@1
NuGetCommand@2
command
restore
restoreSolution
Similar to usingNuGetRestore@1or theNuGetInstaller@0restoreoption,NuGetCommand@2has inputs to set the feed, decide betweenselectorconfig, specify the path to theNuGet.configfile, and use packages from nuget.org.
NuGetRestore@1
NuGetInstaller@0
restore
NuGetCommand@2
select
config
NuGet.config
For more information, see the followingexamples.
Support for Newer Ubuntu Hosted Images
Starting with Ubuntu 24.04, Microsft-hosted agentswill not ship with monowhich is required to run the underlying NuGet client that powersNuGetCommand@2. Users of this task on Ubuntu should migrate to the long term supported cross-platform taskNuGetAuthenticate@1with .NET CLI.
NuGetCommand@2
NuGetAuthenticate@1
TheNuGet Authenticatetask will handle injecting credentials into the needed places for client tools to authenticate as your pipeline identity. Please see the linked documentation for instructions, FAQs, and examples for usingNuGet Authenticatewith dotnet.
NuGet Authenticate
Ifdotnet CLI commandsdo not support your scenario, pleasereport this to the .NET CLI team as an issue. You may continue topin your agent imagetoUbuntu 22.04 or earlier. Ubuntu 22.04 support will continue until Ubuntu 26.04 is made generally available, no earlier than 2026.
Examples
Restore
Restore all your solutions with packages from a selected feed.
# Restore from a project scoped feed in the same organization
- task: NuGetCommand@2
  inputs:
    command: 'restore'
    feedsToUse: 'select'
    vstsFeed: 'my-project/my-project-scoped-feed'
    includeNuGetOrg: false
    restoreSolution: '**/*.sln'
# Restore from a project scoped feed in the same organization
- task: NuGetCommand@2
  inputs:
    command: 'restore'
    feedsToUse: 'select'
    vstsFeed: 'my-project/my-project-scoped-feed'
    includeNuGetOrg: false
    restoreSolution: '**/*.sln'
# Restore from an organization scoped feed in the same organization
- task: NuGetCommand@2
  inputs:
    command: 'restore'
    feedsToUse: 'select'
    vstsFeed: 'my-organization-scoped-feed'
    restoreSolution: '**/*.sln'
# Restore from an organization scoped feed in the same organization
- task: NuGetCommand@2
  inputs:
    command: 'restore'
    feedsToUse: 'select'
    vstsFeed: 'my-organization-scoped-feed'
    restoreSolution: '**/*.sln'
# Restore from a feed in a different organization
- task: NuGetCommand@2
  inputs:
    command: 'restore'
    feedsToUse: config
    nugetConfigPath: ./nuget.config
    restoreSolution: '**/*.sln'
    externalFeedCredentials: 'MyServiceConnectionName'
    noCache: true
  continueOnError: true
# Restore from a feed in a different organization
- task: NuGetCommand@2
  inputs:
    command: 'restore'
    feedsToUse: config
    nugetConfigPath: ./nuget.config
    restoreSolution: '**/*.sln'
    externalFeedCredentials: 'MyServiceConnectionName'
    noCache: true
  continueOnError: true
# Restore from feed(s) set in nuget.config
- task: NuGetCommand@2
  inputs:
    command: 'restore'
    feedsToUse: 'config'
    nugetConfigPath: 'nuget.config'
# Restore from feed(s) set in nuget.config
- task: NuGetCommand@2
  inputs:
    command: 'restore'
    feedsToUse: 'config'
    nugetConfigPath: 'nuget.config'
Package
Create a NuGet package in the destination folder.
# Package a project
- task: NuGetCommand@2
  inputs:
    command: 'pack'
    packagesToPack: '**/*.csproj'
    packDestination: '$(Build.ArtifactStagingDirectory)'
# Package a project
- task: NuGetCommand@2
  inputs:
    command: 'pack'
    packagesToPack: '**/*.csproj'
    packDestination: '$(Build.ArtifactStagingDirectory)'
Push
Note
Pipeline artifacts are downloaded to thePipeline.Workspacedirectory, and to theSystem.ArtifactsDirectorydirectory for classic release pipelines.packagesToPushvalue can be set to$(Pipeline.Workspace)/**/*.nupkgor$(System.ArtifactsDirectory)/**/*.nupkgrespectively.
Pipeline.Workspace
System.ArtifactsDirectory
packagesToPush
$(Pipeline.Workspace)/**/*.nupkg
$(System.ArtifactsDirectory)/**/*.nupkg
Push/Publish a package to a feed defined in your NuGet.config.# Push a project
- task: NuGetCommand@2
  inputs:
    command: 'push'
    packagesToPush: '$(Build.ArtifactStagingDirectory)/**/*.nupkg'
    feedsToUse: 'config'
    nugetConfigPath: '$(Build.WorkingDirectory)/NuGet.config'
Push/Publish a package to a feed defined in your NuGet.config.
# Push a project
- task: NuGetCommand@2
  inputs:
    command: 'push'
    packagesToPush: '$(Build.ArtifactStagingDirectory)/**/*.nupkg'
    feedsToUse: 'config'
    nugetConfigPath: '$(Build.WorkingDirectory)/NuGet.config'
# Push a project
- task: NuGetCommand@2
  inputs:
    command: 'push'
    packagesToPush: '$(Build.ArtifactStagingDirectory)/**/*.nupkg'
    feedsToUse: 'config'
    nugetConfigPath: '$(Build.WorkingDirectory)/NuGet.config'
Push/Publish a package to an organization scoped feed# Push a project
- task: NuGetCommand@2
  inputs:
    command: 'push'
    nuGetFeedType: 'internal'
    publishVstsFeed: 'my-organization-scoped-feed'
Push/Publish a package to an organization scoped feed
# Push a project
- task: NuGetCommand@2
  inputs:
    command: 'push'
    nuGetFeedType: 'internal'
    publishVstsFeed: 'my-organization-scoped-feed'
# Push a project
- task: NuGetCommand@2
  inputs:
    command: 'push'
    nuGetFeedType: 'internal'
    publishVstsFeed: 'my-organization-scoped-feed'
Push/Publish a package to a project scoped feed# Push a project
- task: NuGetCommand@2
  inputs:
    command: 'push'
    nuGetFeedType: 'internal'
    publishVstsFeed: 'my-project/my-project-scoped-feed'
Push/Publish a package to a project scoped feed
# Push a project
- task: NuGetCommand@2
  inputs:
    command: 'push'
    nuGetFeedType: 'internal'
    publishVstsFeed: 'my-project/my-project-scoped-feed'
# Push a project
- task: NuGetCommand@2
  inputs:
    command: 'push'
    nuGetFeedType: 'internal'
    publishVstsFeed: 'my-project/my-project-scoped-feed'
Push/Publish a package to NuGet.org# Push a project
- task: NuGetCommand@2
  inputs:
    command: 'push'
    feedsToUse: 'config'
    includeNugetOrg: 'true'
Push/Publish a package to NuGet.org
# Push a project
- task: NuGetCommand@2
  inputs:
    command: 'push'
    feedsToUse: 'config'
    includeNugetOrg: 'true'
# Push a project
- task: NuGetCommand@2
  inputs:
    command: 'push'
    feedsToUse: 'config'
    includeNugetOrg: 'true'
Custom
Run any other NuGet command besides the default ones: pack, push, and restore.
# list local NuGet resources.
- task: NuGetCommand@2
  displayName: 'list locals'
  inputs:
    command: custom
    arguments: 'locals all -list'
# list local NuGet resources.
- task: NuGetCommand@2
  displayName: 'list locals'
  inputs:
    command: custom
    arguments: 'locals all -list'
Requirements
Feedback
Was this page helpful?
Additional resources